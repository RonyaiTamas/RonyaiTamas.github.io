{"mappings":"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","sources":["<anon>","src/index.jsx","node_modules/apprun/esm/apprun.js","node_modules/apprun/src/apprun.ts","node_modules/apprun/esm/app.js","node_modules/apprun/src/app.ts","node_modules/apprun/src/vdom.ts","node_modules/apprun/esm/vdom-my.js","node_modules/apprun/src/vdom-my.ts","node_modules/apprun/esm/directive.js","node_modules/apprun/src/directive.ts","node_modules/apprun/esm/component.js","node_modules/apprun/src/component.ts","node_modules/apprun/esm/decorator.js","node_modules/apprun/src/decorator.ts","node_modules/apprun/esm/web-component.js","node_modules/apprun/src/web-component.ts","node_modules/apprun/esm/router.js","node_modules/apprun/src/router.ts"],"sourcesContent":["(() => {\n\n      var $parcel$global = globalThis;\n    class $d845d838f0e6e62c$export$86fbec116b87613f {\n    constructor(){\n        this._events = {};\n    }\n    on(name, fn, options = {}) {\n        this._events[name] = this._events[name] || [];\n        this._events[name].push({\n            fn: fn,\n            options: options\n        });\n    }\n    off(name, fn) {\n        const subscribers = this._events[name] || [];\n        this._events[name] = subscribers.filter((sub)=>sub.fn !== fn);\n    }\n    find(name) {\n        return this._events[name];\n    }\n    run(name, ...args) {\n        const subscribers = this.getSubscribers(name, this._events);\n        console.assert(subscribers && subscribers.length > 0, 'No subscriber for event: ' + name);\n        subscribers.forEach((sub)=>{\n            const { fn: fn, options: options } = sub;\n            if (options.delay) this.delay(name, fn, args, options);\n            else Object.keys(options).length > 0 ? fn.apply(this, [\n                ...args,\n                options\n            ]) : fn.apply(this, args);\n            return !sub.options.once;\n        });\n        return subscribers.length;\n    }\n    once(name, fn, options = {}) {\n        this.on(name, fn, Object.assign(Object.assign({}, options), {\n            once: true\n        }));\n    }\n    delay(name, fn, args, options) {\n        if (options._t) clearTimeout(options._t);\n        options._t = setTimeout(()=>{\n            clearTimeout(options._t);\n            Object.keys(options).length > 0 ? fn.apply(this, [\n                ...args,\n                options\n            ]) : fn.apply(this, args);\n        }, options.delay);\n    }\n    runAsync(name, ...args) {\n        const subscribers = this.getSubscribers(name, this._events);\n        console.assert(subscribers && subscribers.length > 0, 'No subscriber for event: ' + name);\n        const promises = subscribers.map((sub)=>{\n            const { fn: fn, options: options } = sub;\n            return Object.keys(options).length > 0 ? fn.apply(this, [\n                ...args,\n                options\n            ]) : fn.apply(this, args);\n        });\n        return Promise.all(promises);\n    }\n    query(name, ...args) {\n        return this.runAsync(name, ...args);\n    }\n    getSubscribers(name, events) {\n        const subscribers = events[name] || [];\n        // Update the list of subscribers by pulling out those which will run once.\n        // We must do this update prior to running any of the events in case they\n        // cause additional events to be turned off or on.\n        events[name] = subscribers.filter((sub)=>{\n            return !sub.options.once;\n        });\n        Object.keys(events).filter((evt)=>evt.endsWith('*') && name.startsWith(evt.replace('*', ''))).sort((a, b)=>b.length - a.length).forEach((evt)=>subscribers.push(...events[evt].map((sub)=>Object.assign(Object.assign({}, sub), {\n                    options: Object.assign(Object.assign({}, sub.options), {\n                        event: name\n                    })\n                }))));\n        return subscribers;\n    }\n}\nconst $d845d838f0e6e62c$var$AppRunVersions = 'AppRun-3';\nlet $d845d838f0e6e62c$var$app;\nconst $d845d838f0e6e62c$var$root = typeof self === 'object' && self.self === self && self || typeof $parcel$global === 'object' && $parcel$global.global === $parcel$global && $parcel$global;\nif ($d845d838f0e6e62c$var$root['app'] && $d845d838f0e6e62c$var$root['_AppRunVersions']) $d845d838f0e6e62c$var$app = $d845d838f0e6e62c$var$root['app'];\nelse {\n    $d845d838f0e6e62c$var$app = new $d845d838f0e6e62c$export$86fbec116b87613f();\n    $d845d838f0e6e62c$var$root['app'] = $d845d838f0e6e62c$var$app;\n    $d845d838f0e6e62c$var$root['_AppRunVersions'] = $d845d838f0e6e62c$var$AppRunVersions;\n}\nvar $d845d838f0e6e62c$export$2e2bcd8739ae039 = $d845d838f0e6e62c$var$app;\n\n\n\nconst $eea6e28fc566d180$var$getStateValue = (component, name)=>{\n    return (name ? component['state'][name] : component['state']) || '';\n};\nconst $eea6e28fc566d180$var$setStateValue = (component, name, value)=>{\n    if (name) {\n        const state = component['state'] || {};\n        state[name] = value;\n        component.setState(state);\n    } else component.setState(value);\n};\nconst $eea6e28fc566d180$var$apply_directive = (key, props, tag, component)=>{\n    if (key.startsWith('$on')) {\n        const event = props[key];\n        key = key.substring(1);\n        if (typeof event === 'boolean') props[key] = (e)=>component.run ? component.run(key, e) : (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).run(key, e);\n        else if (typeof event === 'string') props[key] = (e)=>component.run ? component.run(event, e) : (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).run(event, e);\n        else if (typeof event === 'function') props[key] = (e)=>component.setState(event(component.state, e));\n        else if (Array.isArray(event)) {\n            const [handler, ...p] = event;\n            if (typeof handler === 'string') props[key] = (e)=>component.run ? component.run(handler, ...p, e) : (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).run(handler, ...p, e);\n            else if (typeof handler === 'function') props[key] = (e)=>component.setState(handler(component.state, ...p, e));\n        }\n    } else if (key === '$bind') {\n        const type = props['type'] || 'text';\n        const name = typeof props[key] === 'string' ? props[key] : props['name'];\n        if (tag === 'input') switch(type){\n            case 'checkbox':\n                props['checked'] = $eea6e28fc566d180$var$getStateValue(component, name);\n                props['onclick'] = (e)=>$eea6e28fc566d180$var$setStateValue(component, name || e.target.name, e.target.checked);\n                break;\n            case 'radio':\n                props['checked'] = $eea6e28fc566d180$var$getStateValue(component, name) === props['value'];\n                props['onclick'] = (e)=>$eea6e28fc566d180$var$setStateValue(component, name || e.target.name, e.target.value);\n                break;\n            case 'number':\n            case 'range':\n                props['value'] = $eea6e28fc566d180$var$getStateValue(component, name);\n                props['oninput'] = (e)=>$eea6e28fc566d180$var$setStateValue(component, name || e.target.name, Number(e.target.value));\n                break;\n            default:\n                props['value'] = $eea6e28fc566d180$var$getStateValue(component, name);\n                props['oninput'] = (e)=>$eea6e28fc566d180$var$setStateValue(component, name || e.target.name, e.target.value);\n        }\n        else if (tag === 'select') {\n            props['value'] = $eea6e28fc566d180$var$getStateValue(component, name);\n            props['onchange'] = (e)=>{\n                if (!e.target.multiple) $eea6e28fc566d180$var$setStateValue(component, name || e.target.name, e.target.value);\n            };\n        } else if (tag === 'option') {\n            props['selected'] = $eea6e28fc566d180$var$getStateValue(component, name);\n            props['onclick'] = (e)=>$eea6e28fc566d180$var$setStateValue(component, name || e.target.name, e.target.selected);\n        } else if (tag === 'textarea') {\n            props['innerHTML'] = $eea6e28fc566d180$var$getStateValue(component, name);\n            props['oninput'] = (e)=>$eea6e28fc566d180$var$setStateValue(component, name || e.target.name, e.target.value);\n        }\n    } else (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).run('$', {\n        key: key,\n        tag: tag,\n        props: props,\n        component: component\n    });\n};\nconst $eea6e28fc566d180$var$directive = (vdom, component)=>{\n    if (Array.isArray(vdom)) return vdom.map((element)=>$eea6e28fc566d180$var$directive(element, component));\n    else {\n        let { type: type, tag: tag, props: props, children: children } = vdom;\n        tag = tag || type;\n        children = children || (props === null || props === void 0 ? void 0 : props.children);\n        if (props) Object.keys(props).forEach((key)=>{\n            if (key.startsWith('$')) {\n                $eea6e28fc566d180$var$apply_directive(key, props, tag, component);\n                delete props[key];\n            }\n        });\n        if (children) $eea6e28fc566d180$var$directive(children, component);\n        return vdom;\n    }\n};\nvar $eea6e28fc566d180$export$2e2bcd8739ae039 = $eea6e28fc566d180$var$directive;\n\n\nfunction $d3d8ba71a5ce8f2f$export$ffb0004e005737fa(props, ...children) {\n    return $d3d8ba71a5ce8f2f$var$collect(children);\n}\nconst $d3d8ba71a5ce8f2f$var$ATTR_PROPS = '_props';\nfunction $d3d8ba71a5ce8f2f$var$collect(children) {\n    const ch = [];\n    const push = (c)=>{\n        if (c !== null && c !== undefined && c !== '' && c !== false) ch.push(typeof c === 'function' || typeof c === 'object' ? c : `${c}`);\n    };\n    children && children.forEach((c)=>{\n        if (Array.isArray(c)) c.forEach((i)=>push(i));\n        else push(c);\n    });\n    return ch;\n}\nfunction $d3d8ba71a5ce8f2f$export$c8a8987d4410bf2d(tag, props, ...children) {\n    const ch = $d3d8ba71a5ce8f2f$var$collect(children);\n    if (typeof tag === 'string') return {\n        tag: tag,\n        props: props,\n        children: ch\n    };\n    else if (Array.isArray(tag)) return tag; // JSX fragments - babel\n    else if (tag === undefined && children) return ch; // JSX fragments - typescript\n    else if (Object.getPrototypeOf(tag).__isAppRunComponent) return {\n        tag: tag,\n        props: props,\n        children: ch\n    }; // createComponent(tag, { ...props, children });\n    else if (typeof tag === 'function') return tag(props, ch);\n    else throw new Error(`Unknown tag in vdom ${tag}`);\n}\nconst $d3d8ba71a5ce8f2f$var$keyCache = new WeakMap();\nconst $d3d8ba71a5ce8f2f$export$a042ffe722996149 = (element, nodes, component = {})=>{\n    // tslint:disable-next-line\n    if (nodes == null || nodes === false) return;\n    const el = typeof element === 'string' && element ? document.getElementById(element) || document.querySelector(element) : element;\n    nodes = (0, $eea6e28fc566d180$export$2e2bcd8739ae039)(nodes, component);\n    $d3d8ba71a5ce8f2f$var$render(el, nodes, component);\n};\nfunction $d3d8ba71a5ce8f2f$var$render(element, nodes, parent = {}) {\n    // tslint:disable-next-line\n    if (nodes == null || nodes === false) return;\n    nodes = $d3d8ba71a5ce8f2f$var$createComponent(nodes, parent);\n    if (!element) return;\n    const isSvg = element.nodeName === \"SVG\";\n    if (Array.isArray(nodes)) $d3d8ba71a5ce8f2f$var$updateChildren(element, nodes, isSvg);\n    else $d3d8ba71a5ce8f2f$var$updateChildren(element, [\n        nodes\n    ], isSvg);\n}\nfunction $d3d8ba71a5ce8f2f$var$same(el, node) {\n    // if (!el || !node) return false;\n    const key1 = el.nodeName;\n    const key2 = `${node.tag || ''}`;\n    return key1.toUpperCase() === key2.toUpperCase();\n}\nfunction $d3d8ba71a5ce8f2f$var$update(element, node, isSvg) {\n    if (node['_op'] === 3) return;\n    // console.assert(!!element);\n    isSvg = isSvg || node.tag === \"svg\";\n    if (!$d3d8ba71a5ce8f2f$var$same(element, node)) {\n        element.parentNode.replaceChild($d3d8ba71a5ce8f2f$var$create(node, isSvg), element);\n        return;\n    }\n    !(node['_op'] & 2) && $d3d8ba71a5ce8f2f$var$updateChildren(element, node.children, isSvg);\n    !(node['_op'] & 1) && $d3d8ba71a5ce8f2f$export$c8dce3c08436e91e(element, node.props, isSvg);\n}\nfunction $d3d8ba71a5ce8f2f$var$updateChildren(element, children, isSvg) {\n    var _a, _b;\n    const old_len = ((_a = element.childNodes) === null || _a === void 0 ? void 0 : _a.length) || 0;\n    const new_len = (children === null || children === void 0 ? void 0 : children.length) || 0;\n    const len = Math.min(old_len, new_len);\n    for(let i = 0; i < len; i++){\n        const child = children[i];\n        if (child['_op'] === 3) continue;\n        const el = element.childNodes[i];\n        if (typeof child === 'string') {\n            if (el.textContent !== child) {\n                if (el.nodeType === 3) el.nodeValue = child;\n                else element.replaceChild($d3d8ba71a5ce8f2f$var$createText(child), el);\n            }\n        } else if (child instanceof HTMLElement || child instanceof SVGElement) element.insertBefore(child, el);\n        else {\n            const key = child.props && child.props['key'];\n            if (key) {\n                if (el.key === key) $d3d8ba71a5ce8f2f$var$update(element.childNodes[i], child, isSvg);\n                else {\n                    // console.log(el.key, key);\n                    const old = $d3d8ba71a5ce8f2f$var$keyCache[key];\n                    if (old) {\n                        const temp = old.nextSibling;\n                        element.insertBefore(old, el);\n                        temp ? element.insertBefore(el, temp) : element.appendChild(el);\n                        $d3d8ba71a5ce8f2f$var$update(element.childNodes[i], child, isSvg);\n                    } else element.replaceChild($d3d8ba71a5ce8f2f$var$create(child, isSvg), el);\n                }\n            } else $d3d8ba71a5ce8f2f$var$update(element.childNodes[i], child, isSvg);\n        }\n    }\n    let n = ((_b = element.childNodes) === null || _b === void 0 ? void 0 : _b.length) || 0;\n    while(n > len){\n        element.removeChild(element.lastChild);\n        n--;\n    }\n    if (new_len > len) {\n        const d = document.createDocumentFragment();\n        for(let i = len; i < children.length; i++)d.appendChild($d3d8ba71a5ce8f2f$var$create(children[i], isSvg));\n        element.appendChild(d);\n    }\n}\nconst $d3d8ba71a5ce8f2f$export$74e2a2bf9f381f22 = (html)=>{\n    const div = document.createElement('section');\n    div.insertAdjacentHTML('afterbegin', html);\n    return Array.from(div.children);\n};\nfunction $d3d8ba71a5ce8f2f$var$createText(node) {\n    if ((node === null || node === void 0 ? void 0 : node.indexOf('_html:')) === 0) {\n        const div = document.createElement('div');\n        div.insertAdjacentHTML('afterbegin', node.substring(6));\n        return div;\n    } else return document.createTextNode(node !== null && node !== void 0 ? node : '');\n}\nfunction $d3d8ba71a5ce8f2f$var$create(node, isSvg) {\n    // console.assert(node !== null && node !== undefined);\n    if (node instanceof HTMLElement || node instanceof SVGElement) return node;\n    if (typeof node === \"string\") return $d3d8ba71a5ce8f2f$var$createText(node);\n    if (!node.tag || typeof node.tag === 'function') return $d3d8ba71a5ce8f2f$var$createText(JSON.stringify(node));\n    isSvg = isSvg || node.tag === \"svg\";\n    const element = isSvg ? document.createElementNS(\"http://www.w3.org/2000/svg\", node.tag) : document.createElement(node.tag);\n    $d3d8ba71a5ce8f2f$export$c8dce3c08436e91e(element, node.props, isSvg);\n    if (node.children) node.children.forEach((child)=>element.appendChild($d3d8ba71a5ce8f2f$var$create(child, isSvg)));\n    return element;\n}\nfunction $d3d8ba71a5ce8f2f$var$mergeProps(oldProps, newProps) {\n    newProps['class'] = newProps['class'] || newProps['className'];\n    delete newProps['className'];\n    const props = {};\n    if (oldProps) Object.keys(oldProps).forEach((p)=>props[p] = null);\n    if (newProps) Object.keys(newProps).forEach((p)=>props[p] = newProps[p]);\n    return props;\n}\nfunction $d3d8ba71a5ce8f2f$export$c8dce3c08436e91e(element, props, isSvg) {\n    // console.assert(!!element);\n    const cached = element[$d3d8ba71a5ce8f2f$var$ATTR_PROPS] || {};\n    props = $d3d8ba71a5ce8f2f$var$mergeProps(cached, props || {});\n    element[$d3d8ba71a5ce8f2f$var$ATTR_PROPS] = props;\n    for(const name in props){\n        const value = props[name];\n        // if (cached[name] === value) continue;\n        // console.log('updateProps', name, value);\n        if (name.startsWith('data-')) {\n            const dname = name.substring(5);\n            const cname = dname.replace(/-(\\w)/g, (match)=>match[1].toUpperCase());\n            if (element.dataset[cname] !== value) {\n                if (value || value === \"\") element.dataset[cname] = value;\n                else delete element.dataset[cname];\n            }\n        } else if (name === 'style') {\n            if (element.style.cssText) element.style.cssText = '';\n            if (typeof value === 'string') element.style.cssText = value;\n            else {\n                for(const s in value)if (element.style[s] !== value[s]) element.style[s] = value[s];\n            }\n        } else if (name.startsWith('xlink')) {\n            const xname = name.replace('xlink', '').toLowerCase();\n            if (value == null || value === false) element.removeAttributeNS('http://www.w3.org/1999/xlink', xname);\n            else element.setAttributeNS('http://www.w3.org/1999/xlink', xname, value);\n        } else if (name.startsWith('on')) {\n            if (!value || typeof value === 'function') element[name] = value;\n            else if (typeof value === 'string') {\n                if (value) element.setAttribute(name, value);\n                else element.removeAttribute(name);\n            }\n        } else if (/^id$|^class$|^list$|^readonly$|^contenteditable$|^role|-|^for$/g.test(name) || isSvg) {\n            if (element.getAttribute(name) !== value) {\n                if (value) element.setAttribute(name, value);\n                else element.removeAttribute(name);\n            }\n        } else if (element[name] !== value) element[name] = value;\n        if (name === 'key' && value) $d3d8ba71a5ce8f2f$var$keyCache[value] = element;\n    }\n    if (props && typeof props['ref'] === 'function') window.requestAnimationFrame(()=>props['ref'](element));\n}\nfunction $d3d8ba71a5ce8f2f$var$render_component(node, parent, idx) {\n    const { tag: tag, props: props, children: children } = node;\n    let key = `_${idx}`;\n    let id = props && props['id'];\n    if (!id) id = `_${idx}${Date.now()}`;\n    else key = id;\n    let asTag = 'section';\n    if (props && props['as']) {\n        asTag = props['as'];\n        delete props['as'];\n    }\n    if (!parent.__componentCache) parent.__componentCache = {};\n    let component = parent.__componentCache[key];\n    if (!component || !(component instanceof tag) || !component.element) {\n        const element = document.createElement(asTag);\n        component = parent.__componentCache[key] = new tag(Object.assign(Object.assign({}, props), {\n            children: children\n        })).mount(element, {\n            render: true\n        });\n    } else component.renderState(component.state);\n    if (component.mounted) {\n        const new_state = component.mounted(props, children, component.state);\n        typeof new_state !== 'undefined' && component.setState(new_state);\n    }\n    $d3d8ba71a5ce8f2f$export$c8dce3c08436e91e(component.element, props, false);\n    return component.element;\n}\nfunction $d3d8ba71a5ce8f2f$var$createComponent(node, parent, idx = 0) {\n    var _a;\n    if (typeof node === 'string') return node;\n    if (Array.isArray(node)) return node.map((child)=>$d3d8ba71a5ce8f2f$var$createComponent(child, parent, idx++));\n    let vdom = node;\n    if (node && typeof node.tag === 'function' && Object.getPrototypeOf(node.tag).__isAppRunComponent) vdom = $d3d8ba71a5ce8f2f$var$render_component(node, parent, idx);\n    if (vdom && Array.isArray(vdom.children)) {\n        const new_parent = (_a = vdom.props) === null || _a === void 0 ? void 0 : _a._component;\n        if (new_parent) {\n            let i = 0;\n            vdom.children = vdom.children.map((child)=>$d3d8ba71a5ce8f2f$var$createComponent(child, new_parent, i++));\n        } else vdom.children = vdom.children.map((child)=>$d3d8ba71a5ce8f2f$var$createComponent(child, parent, idx++));\n    }\n    return vdom;\n}\n\n\n\n\n\nconst $13657f9c6c27f7d3$export$da64fc29f17f9d0e = (componentClass, options = {})=>class CustomElement extends HTMLElement {\n        constructor(){\n            super();\n        }\n        get component() {\n            return this._component;\n        }\n        get state() {\n            return this._component.state;\n        }\n        static get observedAttributes() {\n            // attributes need to be set to lowercase in order to get observed\n            return (options.observedAttributes || []).map((attr)=>attr.toLowerCase());\n        }\n        connectedCallback() {\n            if (this.isConnected && !this._component) {\n                const opts = options || {};\n                this._shadowRoot = opts.shadow ? this.attachShadow({\n                    mode: 'open'\n                }) : this;\n                const observedAttributes = opts.observedAttributes || [];\n                const attrMap = observedAttributes.reduce((map, name)=>{\n                    const lc = name.toLowerCase();\n                    if (lc !== name) map[lc] = name;\n                    return map;\n                }, {});\n                this._attrMap = (name)=>attrMap[name] || name;\n                const props = {};\n                Array.from(this.attributes).forEach((item)=>props[this._attrMap(item.name)] = item.value);\n                // add getters/ setters to allow observation on observedAttributes\n                observedAttributes.forEach((name)=>{\n                    if (this[name] !== undefined) props[name] = this[name];\n                    Object.defineProperty(this, name, {\n                        get () {\n                            return props[name];\n                        },\n                        set (value) {\n                            // trigger change event\n                            this.attributeChangedCallback(name, props[name], value);\n                        },\n                        configurable: true,\n                        enumerable: true\n                    });\n                });\n                requestAnimationFrame(()=>{\n                    const children = this.children ? Array.from(this.children) : [];\n                    // children.forEach(el => el.parentElement.removeChild(el));\n                    this._component = new componentClass(Object.assign(Object.assign({}, props), {\n                        children: children\n                    })).mount(this._shadowRoot, opts);\n                    // attach props to component\n                    this._component._props = props;\n                    // expose dispatchEvent\n                    this._component.dispatchEvent = this.dispatchEvent.bind(this);\n                    if (this._component.mounted) {\n                        const new_state = this._component.mounted(props, children, this._component.state);\n                        if (typeof new_state !== 'undefined') this._component.state = new_state;\n                    }\n                    this.on = this._component.on.bind(this._component);\n                    this.run = this._component.run.bind(this._component);\n                    if (!(opts.render === false)) this._component.run('.');\n                });\n            }\n        }\n        disconnectedCallback() {\n            var _a, _b, _c, _d;\n            (_b = (_a = this._component) === null || _a === void 0 ? void 0 : _a.unload) === null || _b === void 0 || _b.call(_a);\n            (_d = (_c = this._component) === null || _c === void 0 ? void 0 : _c.unmount) === null || _d === void 0 || _d.call(_c);\n            this._component = null;\n        }\n        attributeChangedCallback(name, oldValue, value) {\n            if (this._component) {\n                // camelCase attributes arrive only in lowercase\n                const mappedName = this._attrMap(name);\n                // store the new property/ attribute\n                this._component._props[mappedName] = value;\n                this._component.run('attributeChanged', mappedName, oldValue, value);\n                if (value !== oldValue && !(options.render === false)) window.requestAnimationFrame(()=>{\n                    // re-render state with new combined props on next animation frame\n                    this._component.run('.');\n                });\n            }\n        }\n    };\nvar $13657f9c6c27f7d3$export$2e2bcd8739ae039 = (name, componentClass, options)=>{\n    typeof customElements !== 'undefined' && customElements.define(name, $13657f9c6c27f7d3$export$da64fc29f17f9d0e(componentClass, options));\n};\n\n\nconst $167748ee6780b422$export$5529805dde9bd358 = {\n    meta: new WeakMap(),\n    defineMetadata (metadataKey, metadataValue, target) {\n        if (!this.meta.has(target)) this.meta.set(target, {});\n        this.meta.get(target)[metadataKey] = metadataValue;\n    },\n    getMetadataKeys (target) {\n        target = Object.getPrototypeOf(target);\n        return this.meta.get(target) ? Object.keys(this.meta.get(target)) : [];\n    },\n    getMetadata (metadataKey, target) {\n        target = Object.getPrototypeOf(target);\n        return this.meta.get(target) ? this.meta.get(target)[metadataKey] : null;\n    }\n};\nfunction $167748ee6780b422$export$722fbec263ad908a(events, options = {}) {\n    return (target, key, descriptor)=>{\n        const name = events ? events.toString() : key;\n        $167748ee6780b422$export$5529805dde9bd358.defineMetadata(`apprun-update:${name}`, {\n            name: name,\n            key: key,\n            options: options\n        }, target);\n        return descriptor;\n    };\n}\nfunction $167748ee6780b422$export$af631764ddc44097(events, options = {}) {\n    return function(target, key) {\n        const name = events ? events.toString() : key;\n        $167748ee6780b422$export$5529805dde9bd358.defineMetadata(`apprun-update:${name}`, {\n            name: name,\n            key: key,\n            options: options\n        }, target);\n    };\n}\nfunction $167748ee6780b422$export$da64fc29f17f9d0e(name, options) {\n    return function _customElement(constructor) {\n        (0, $13657f9c6c27f7d3$export$2e2bcd8739ae039)(name, constructor, options);\n        return constructor;\n    };\n}\n\n\n\nconst $c7ca5bcb5d92be12$var$componentCache = new Map();\nif (!(0, $d845d838f0e6e62c$export$2e2bcd8739ae039).find('get-components')) (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).on('get-components', (o)=>o.components = $c7ca5bcb5d92be12$var$componentCache);\nconst $c7ca5bcb5d92be12$var$REFRESH = (state)=>state;\nclass $c7ca5bcb5d92be12$export$16fa2f45be04daa8 {\n    renderState(state, vdom = null) {\n        if (!this.view) return;\n        let html = vdom || this.view(state);\n        (0, $d845d838f0e6e62c$export$2e2bcd8739ae039)['debug'] && (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).run('debug', {\n            component: this,\n            _: html ? '.' : '-',\n            state: state,\n            vdom: html,\n            el: this.element\n        });\n        if (typeof document !== 'object') return;\n        const el = typeof this.element === 'string' && this.element ? document.getElementById(this.element) || document.querySelector(this.element) : this.element;\n        if (!el) return;\n        const tracking_attr = '_c';\n        if (!this.unload) el.removeAttribute && el.removeAttribute(tracking_attr);\n        else if (el['_component'] !== this || el.getAttribute(tracking_attr) !== this.tracking_id) {\n            this.tracking_id = new Date().valueOf().toString();\n            el.setAttribute(tracking_attr, this.tracking_id);\n            if (typeof MutationObserver !== 'undefined') {\n                if (!this.observer) this.observer = new MutationObserver((changes)=>{\n                    if (changes[0].oldValue === this.tracking_id || !document.body.contains(el)) {\n                        this.unload(this.state);\n                        this.observer.disconnect();\n                        this.observer = null;\n                    }\n                });\n                this.observer.observe(document.body, {\n                    childList: true,\n                    subtree: true,\n                    attributes: true,\n                    attributeOldValue: true,\n                    attributeFilter: [\n                        tracking_attr\n                    ]\n                });\n            }\n        }\n        el['_component'] = this;\n        if (!vdom && html) {\n            html = (0, $eea6e28fc566d180$export$2e2bcd8739ae039)(html, this);\n            if (this.options.transition && document && document['startViewTransition']) document['startViewTransition'](()=>(0, $d845d838f0e6e62c$export$2e2bcd8739ae039).render(el, html, this));\n            else (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).render(el, html, this);\n        }\n        this.rendered && this.rendered(this.state);\n    }\n    setState(state, options = {\n        render: true,\n        history: false\n    }) {\n        if (state instanceof Promise) // Promise will not be saved or rendered\n        // state will be saved and rendered when promise is resolved\n        Promise.resolve(state).then((v)=>{\n            this.setState(v, options);\n            this._state = state;\n        });\n        else {\n            this._state = state;\n            if (state == null) return;\n            this.state = state;\n            if (options.render !== false) {\n                // before render state\n                if (options.transition && document && document['startViewTransition']) document['startViewTransition'](()=>this.renderState(state));\n                else this.renderState(state);\n            }\n            if (options.history !== false && this.enable_history) {\n                this._history = [\n                    ...this._history,\n                    state\n                ];\n                this._history_idx = this._history.length - 1;\n            }\n            if (typeof options.callback === 'function') options.callback(this.state);\n        }\n    }\n    constructor(state, view, update, options){\n        this.state = state;\n        this.view = view;\n        this.update = update;\n        this.options = options;\n        this._app = new (0, $d845d838f0e6e62c$export$86fbec116b87613f)();\n        this._actions = [];\n        this._global_events = [];\n        this._history = [];\n        this._history_idx = -1;\n        this._history_prev = ()=>{\n            this._history_idx--;\n            if (this._history_idx >= 0) this.setState(this._history[this._history_idx], {\n                render: true,\n                history: false\n            });\n            else this._history_idx = 0;\n        };\n        this._history_next = ()=>{\n            this._history_idx++;\n            if (this._history_idx < this._history.length) this.setState(this._history[this._history_idx], {\n                render: true,\n                history: false\n            });\n            else this._history_idx = this._history.length - 1;\n        };\n        this.start = (element = null, options)=>{\n            this.mount(element, Object.assign({\n                render: true\n            }, options));\n            if (this.mounted && typeof this.mounted === 'function') {\n                const new_state = this.mounted({}, [], this.state);\n                typeof new_state !== 'undefined' && this.setState(new_state);\n            }\n            return this;\n        };\n    }\n    mount(element = null, options) {\n        var _a, _b;\n        console.assert(!this.element, 'Component already mounted.');\n        this.options = options = Object.assign(Object.assign({}, this.options), options);\n        this.element = element;\n        this.global_event = options.global_event;\n        this.enable_history = !!options.history;\n        if (this.enable_history) {\n            this.on(options.history.prev || 'history-prev', this._history_prev);\n            this.on(options.history.next || 'history-next', this._history_next);\n        }\n        if (options.route) {\n            this.update = this.update || {};\n            if (!this.update[options.route]) this.update[options.route] = $c7ca5bcb5d92be12$var$REFRESH;\n        }\n        this.add_actions();\n        this.state = (_b = (_a = this.state) !== null && _a !== void 0 ? _a : this['model']) !== null && _b !== void 0 ? _b : {};\n        if (typeof this.state === 'function') this.state = this.state();\n        this.setState(this.state, {\n            render: !!options.render,\n            history: true\n        });\n        if ((0, $d845d838f0e6e62c$export$2e2bcd8739ae039)['debug']) {\n            if ($c7ca5bcb5d92be12$var$componentCache.get(element)) $c7ca5bcb5d92be12$var$componentCache.get(element).push(this);\n            else $c7ca5bcb5d92be12$var$componentCache.set(element, [\n                this\n            ]);\n        }\n        return this;\n    }\n    is_global_event(name) {\n        return name && (this.global_event || this._global_events.indexOf(name) >= 0 || name.startsWith('#') || name.startsWith('/') || name.startsWith('@'));\n    }\n    add_action(name, action, options = {}) {\n        if (!action || typeof action !== 'function') return;\n        if (options.global) this._global_events.push(name);\n        this.on(name, (...p)=>{\n            (0, $d845d838f0e6e62c$export$2e2bcd8739ae039)['debug'] && (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).run('debug', {\n                component: this,\n                _: '>',\n                event: name,\n                p: p,\n                current_state: this.state,\n                options: options\n            });\n            const newState = action(this.state, ...p);\n            (0, $d845d838f0e6e62c$export$2e2bcd8739ae039)['debug'] && (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).run('debug', {\n                component: this,\n                _: '<',\n                event: name,\n                p: p,\n                newState: newState,\n                state: this.state,\n                options: options\n            });\n            this.setState(newState, options);\n        }, options);\n    }\n    add_actions() {\n        const actions = this.update || {};\n        (0, $167748ee6780b422$export$5529805dde9bd358).getMetadataKeys(this).forEach((key)=>{\n            if (key.startsWith('apprun-update:')) {\n                const meta = (0, $167748ee6780b422$export$5529805dde9bd358).getMetadata(key, this);\n                actions[meta.name] = [\n                    this[meta.key].bind(this),\n                    meta.options\n                ];\n            }\n        });\n        const all = {};\n        if (Array.isArray(actions)) actions.forEach((act)=>{\n            const [name, action, opts] = act;\n            const names = name.toString();\n            names.split(',').forEach((n)=>all[n.trim()] = [\n                    action,\n                    opts\n                ]);\n        });\n        else Object.keys(actions).forEach((name)=>{\n            const action = actions[name];\n            if (typeof action === 'function' || Array.isArray(action)) name.split(',').forEach((n)=>all[n.trim()] = action);\n        });\n        if (!all['.']) all['.'] = $c7ca5bcb5d92be12$var$REFRESH;\n        Object.keys(all).forEach((name)=>{\n            const action = all[name];\n            if (typeof action === 'function') this.add_action(name, action);\n            else if (Array.isArray(action)) this.add_action(name, action[0], action[1]);\n        });\n    }\n    run(event, ...args) {\n        if (this.state instanceof Promise) return Promise.resolve(this.state).then((state)=>{\n            this.state = state;\n            this.run(event, ...args);\n        });\n        else {\n            const name = event.toString();\n            return this.is_global_event(name) ? (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).run(name, ...args) : this._app.run(name, ...args);\n        }\n    }\n    on(event, fn, options) {\n        const name = event.toString();\n        this._actions.push({\n            name: name,\n            fn: fn\n        });\n        return this.is_global_event(name) ? (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).on(name, fn, options) : this._app.on(name, fn, options);\n    }\n    runAsync(event, ...args) {\n        const name = event.toString();\n        return this.is_global_event(name) ? (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).runAsync(name, ...args) : this._app.runAsync(name, ...args);\n    }\n    // obsolete\n    query(event, ...args) {\n        return this.runAsync(event, ...args);\n    }\n    unmount() {\n        var _a;\n        (_a = this.observer) === null || _a === void 0 || _a.disconnect();\n        this._actions.forEach((action)=>{\n            const { name: name, fn: fn } = action;\n            this.is_global_event(name) ? (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).off(name, fn) : this._app.off(name, fn);\n        });\n    }\n}\n$c7ca5bcb5d92be12$export$16fa2f45be04daa8.__isAppRunComponent = true;\n\n\n\n\n\nconst $c537a6709b1de089$export$2d915adb6cfdfb65 = '//';\nconst $c537a6709b1de089$export$3fafb52e6beb3008 = '///';\nconst $c537a6709b1de089$export$4cb887bfde2d34ca = (url)=>{\n    if (!url) url = '#';\n    if (url.startsWith('#')) {\n        const [name, ...rest] = url.split('/');\n        (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).run(name, ...rest) || (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).run($c537a6709b1de089$export$3fafb52e6beb3008, name, ...rest);\n        (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).run($c537a6709b1de089$export$2d915adb6cfdfb65, name, ...rest);\n    } else if (url.startsWith('/')) {\n        const [_, name, ...rest] = url.split('/');\n        (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).run('/' + name, ...rest) || (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).run($c537a6709b1de089$export$3fafb52e6beb3008, '/' + name, ...rest);\n        (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).run($c537a6709b1de089$export$2d915adb6cfdfb65, '/' + name, ...rest);\n    } else {\n        (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).run(url) || (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).run($c537a6709b1de089$export$3fafb52e6beb3008, url);\n        (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).run($c537a6709b1de089$export$2d915adb6cfdfb65, url);\n    }\n};\nvar $c537a6709b1de089$export$2e2bcd8739ae039 = $c537a6709b1de089$export$4cb887bfde2d34ca;\n\n\nvar $d950e28a633982ba$export$2e2bcd8739ae039 = (0, $d845d838f0e6e62c$export$2e2bcd8739ae039);\nif (!(0, $d845d838f0e6e62c$export$2e2bcd8739ae039).start) {\n    (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).h = (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).createElement = (0, $d3d8ba71a5ce8f2f$export$c8a8987d4410bf2d);\n    (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).render = (0, $d3d8ba71a5ce8f2f$export$a042ffe722996149);\n    (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).Fragment = (0, $d3d8ba71a5ce8f2f$export$ffb0004e005737fa);\n    (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).webComponent = (0, $13657f9c6c27f7d3$export$2e2bcd8739ae039);\n    (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).safeHTML = (0, $d3d8ba71a5ce8f2f$export$74e2a2bf9f381f22);\n    (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).start = (element, model, view, update, options)=>{\n        const opts = Object.assign({\n            render: true,\n            global_event: true\n        }, options);\n        const component = new (0, $c7ca5bcb5d92be12$export$16fa2f45be04daa8)(model, view, update);\n        if (options && options.rendered) component.rendered = options.rendered;\n        if (options && options.mounted) component.mounted = options.mounted;\n        component.start(element, opts);\n        return component;\n    };\n    const NOOP = (_)=>{};\n    (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).on('$', NOOP);\n    (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).on('debug', (_)=>NOOP);\n    (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).on((0, $c537a6709b1de089$export$2d915adb6cfdfb65), NOOP);\n    (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).on('#', NOOP);\n    (0, $d845d838f0e6e62c$export$2e2bcd8739ae039)['route'] = (0, $c537a6709b1de089$export$4cb887bfde2d34ca);\n    (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).on('route', (url)=>(0, $d845d838f0e6e62c$export$2e2bcd8739ae039)['route'] && (0, $d845d838f0e6e62c$export$2e2bcd8739ae039)['route'](url));\n    if (typeof document === 'object') document.addEventListener(\"DOMContentLoaded\", ()=>{\n        if ((0, $d845d838f0e6e62c$export$2e2bcd8739ae039)['route'] === (0, $c537a6709b1de089$export$4cb887bfde2d34ca)) {\n            window.onpopstate = ()=>(0, $c537a6709b1de089$export$4cb887bfde2d34ca)(location.hash);\n            document.body.hasAttribute('apprun-no-init') || (0, $d845d838f0e6e62c$export$2e2bcd8739ae039)['no-init-route'] || (0, $c537a6709b1de089$export$4cb887bfde2d34ca)(location.hash);\n        }\n    });\n    if (typeof window === 'object') {\n        window['Component'] = (0, $c7ca5bcb5d92be12$export$16fa2f45be04daa8);\n        window['_React'] = window['React'];\n        window['React'] = (0, $d845d838f0e6e62c$export$2e2bcd8739ae039);\n        window['on'] = (0, $167748ee6780b422$export$af631764ddc44097);\n        window['customElement'] = (0, $167748ee6780b422$export$da64fc29f17f9d0e);\n        window['safeHTML'] = (0, $d3d8ba71a5ce8f2f$export$74e2a2bf9f381f22);\n    }\n    (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).use_render = (render, mode = 0)=>mode === 0 ? (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).render = (el, vdom)=>render(vdom, el) : (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).render = (el, vdom)=>render(el, vdom); // apprun style\n    (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).use_react = (React, ReactDOM)=>{\n        (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).h = (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).createElement = React.createElement;\n        (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).Fragment = React.Fragment;\n        (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).render = (el, vdom)=>ReactDOM.render(vdom, el);\n        if (React.version && React.version.startsWith('18')) (0, $d845d838f0e6e62c$export$2e2bcd8739ae039).render = (el, vdom)=>{\n            if (!el || !vdom) return;\n            if (!el._root) el._root = ReactDOM.createRoot(el);\n            el._root.render(vdom);\n        };\n    };\n}\n\n\nclass $e998e36c7d3822d2$var$App extends (0, $c7ca5bcb5d92be12$export$16fa2f45be04daa8) {\n    state = 0;\n    view = (state)=>/*#__PURE__*/ React.createElement(\"div\", {\n            className: \"doboz\"\n        }, /*#__PURE__*/ React.createElement(\"h3\", null, state), /*#__PURE__*/ React.createElement(\"button\", {\n            $onclick: \"inc\"\n        }, \"inc\"), /*#__PURE__*/ React.createElement(\"button\", {\n            $onclick: \"dec\"\n        }, \"dec\"));\n    update = {\n        'inc': (state)=>state + 1,\n        'dec': (state)=>state - 1\n    };\n}\n(0, $d845d838f0e6e62c$export$2e2bcd8739ae039).render(document.getElementById('root'), /*#__PURE__*/ React.createElement($e998e36c7d3822d2$var$App, null));\n\n})();\n//# sourceMappingURL=index.js.map\n","import {app, Component} from 'apprun'\r\n\r\nclass App extends Component {\r\n    state = 0\r\n    view = (state) => <div className='doboz'>\r\n        <h3>{state}</h3>\r\n        <button $onclick='inc'>inc</button>\r\n        <button $onclick='dec'>dec</button>\r\n    </div>\r\n    update = {\r\n        'inc': (state) => state + 1,\r\n        'dec': (state) => state - 1\r\n    }\r\n}\r\n\r\napp.render(document.getElementById('root'), <App />)","import app, { App } from './app';\nimport { createElement, render, Fragment, safeHTML } from './vdom';\nimport { Component } from './component';\nimport { on, update, customElement } from './decorator';\nimport webComponent from './web-component';\nimport { route, ROUTER_EVENT, ROUTER_404_EVENT } from './router';\nexport { App, app, Component, on, update, Fragment, safeHTML };\nexport { update as event };\nexport { ROUTER_EVENT, ROUTER_404_EVENT };\nexport { customElement };\nexport default app;\nif (!app.start) {\n    app.h = app.createElement = createElement;\n    app.render = render;\n    app.Fragment = Fragment;\n    app.webComponent = webComponent;\n    app.safeHTML = safeHTML;\n    app.start = (element, model, view, update, options) => {\n        const opts = Object.assign({ render: true, global_event: true }, options);\n        const component = new Component(model, view, update);\n        if (options && options.rendered)\n            component.rendered = options.rendered;\n        if (options && options.mounted)\n            component.mounted = options.mounted;\n        component.start(element, opts);\n        return component;\n    };\n    const NOOP = _ => { };\n    app.on('$', NOOP);\n    app.on('debug', _ => NOOP);\n    app.on(ROUTER_EVENT, NOOP);\n    app.on('#', NOOP);\n    app['route'] = route;\n    app.on('route', url => app['route'] && app['route'](url));\n    if (typeof document === 'object') {\n        document.addEventListener(\"DOMContentLoaded\", () => {\n            if (app['route'] === route) {\n                window.onpopstate = () => route(location.hash);\n                document.body.hasAttribute('apprun-no-init') || app['no-init-route'] || route(location.hash);\n            }\n        });\n    }\n    if (typeof window === 'object') {\n        window['Component'] = Component;\n        window['_React'] = window['React'];\n        window['React'] = app;\n        window['on'] = on;\n        window['customElement'] = customElement;\n        window['safeHTML'] = safeHTML;\n    }\n    app.use_render = (render, mode = 0) => mode === 0 ?\n        app.render = (el, vdom) => render(vdom, el) : // react style\n        app.render = (el, vdom) => render(el, vdom); // apprun style\n    app.use_react = (React, ReactDOM) => {\n        app.h = app.createElement = React.createElement;\n        app.Fragment = React.Fragment;\n        app.render = (el, vdom) => ReactDOM.render(vdom, el);\n        if (React.version && React.version.startsWith('18')) {\n            app.render = (el, vdom) => {\n                if (!el || !vdom)\n                    return;\n                if (!el._root)\n                    el._root = ReactDOM.createRoot(el);\n                el._root.render(vdom);\n            };\n        }\n    };\n}\n//# sourceMappingURL=apprun.js.map","import app, { App } from './app';\nimport { createElement, render, Fragment, safeHTML } from './vdom';\nimport { Component } from './component';\nimport { VNode, View, Action, Update, EventOptions, ActionOptions, MountOptions, AppStartOptions } from './types';\nimport { on, update, customElement } from './decorator';\nimport webComponent, { CustomElementOptions } from './web-component';\nimport { Route, route, ROUTER_EVENT, ROUTER_404_EVENT } from './router';\n\nexport type StatelessComponent<T = {}> = (args: T) => string | VNode | void;\nexport { App, app, Component, View, Action, Update, on, update, EventOptions, ActionOptions, MountOptions, Fragment, safeHTML }\nexport { update as event };\nexport { ROUTER_EVENT, ROUTER_404_EVENT };\nexport { customElement, CustomElementOptions, AppStartOptions };\nexport default app as IApp;\n\nexport interface IApp {\n  start<T, E = any>(element?: Element | string, model?: T, view?: View<T>, update?: Update<T, E>,\n    options?: AppStartOptions<T>): Component<T, E>;\n  on(name: string, fn: (...args: any[]) => void, options?: any): void;\n  off(name: string, fn: (...args: any[]) => void): void;\n  run(name: string, ...args: any[]): number;\n  find(name: string): any | any[];\n  h(tag: string | Function, props, ...children): VNode | VNode[];\n  createElement(tag: string | Function, props, ...children): VNode | VNode[];\n  render(element: Element | string, node: VNode): void;\n  Fragment(props, ...children): any[];\n  route?: Route;\n  webComponent(name: string, componentClass, options?: CustomElementOptions): void;\n  safeHTML(html: string): any[];\n  use_render(render, mode?: 0 | 1);\n  use_react(createRoot);\n}\n\nif (!app.start) {\n  app.h = app.createElement = createElement;\n  app.render = render;\n  app.Fragment = Fragment;\n  app.webComponent = webComponent;\n  app.safeHTML = safeHTML;\n\n  app.start = <T, E = any>(element?: Element | string, model?: T, view?: View<T>, update?: Update<T, E>,\n    options?: AppStartOptions<T>): Component<T, E> => {\n    const opts = { render: true, global_event: true, ...options };\n    const component = new Component<T, E>(model, view, update);\n    if (options && options.rendered) component.rendered = options.rendered;\n    if (options && options.mounted) component.mounted = options.mounted;\n    component.start(element, opts);\n    return component;\n  };\n\n  const NOOP = _ => {/* Intentionally empty */ }\n  app.on('$', NOOP);\n  app.on('debug', _ => NOOP);\n  app.on(ROUTER_EVENT, NOOP);\n  app.on('#', NOOP);\n  app['route'] = route;\n  app.on('route', url => app['route'] && app['route'](url));\n\n  if (typeof document === 'object') {\n    document.addEventListener(\"DOMContentLoaded\", () => {\n      if (app['route'] === route) {\n        window.onpopstate = () => route(location.hash);\n        document.body.hasAttribute('apprun-no-init') || app['no-init-route'] || route(location.hash);\n      }\n    });\n  }\n\n  if (typeof window === 'object') {\n    window['Component'] = Component;\n    window['_React'] = window['React'];\n    window['React'] = app;\n    window['on'] = on;\n    window['customElement'] = customElement;\n    window['safeHTML'] = safeHTML;\n  }\n\n  app.use_render = (render, mode = 0) =>\n    mode === 0 ?\n      app.render = (el, vdom) => render(vdom, el) : // react style\n      app.render = (el, vdom) => render(el, vdom);  // apprun style\n\n  app.use_react = (React, ReactDOM) => {\n    app.h = app.createElement = React.createElement;\n    app.Fragment = React.Fragment;\n    app.render = (el, vdom) => ReactDOM.render(vdom, el);\n    if (React.version && React.version.startsWith('18')) {\n      app.render = (el, vdom) => {\n        if (!el || !vdom) return;\n        if (!el._root) el._root = ReactDOM.createRoot(el);\n        el._root.render(vdom);\n      }\n    }\n  }\n}\n","export class App {\n    constructor() {\n        this._events = {};\n    }\n    on(name, fn, options = {}) {\n        this._events[name] = this._events[name] || [];\n        this._events[name].push({ fn, options });\n    }\n    off(name, fn) {\n        const subscribers = this._events[name] || [];\n        this._events[name] = subscribers.filter((sub) => sub.fn !== fn);\n    }\n    find(name) {\n        return this._events[name];\n    }\n    run(name, ...args) {\n        const subscribers = this.getSubscribers(name, this._events);\n        console.assert(subscribers && subscribers.length > 0, 'No subscriber for event: ' + name);\n        subscribers.forEach((sub) => {\n            const { fn, options } = sub;\n            if (options.delay) {\n                this.delay(name, fn, args, options);\n            }\n            else {\n                Object.keys(options).length > 0 ? fn.apply(this, [...args, options]) : fn.apply(this, args);\n            }\n            return !sub.options.once;\n        });\n        return subscribers.length;\n    }\n    once(name, fn, options = {}) {\n        this.on(name, fn, Object.assign(Object.assign({}, options), { once: true }));\n    }\n    delay(name, fn, args, options) {\n        if (options._t)\n            clearTimeout(options._t);\n        options._t = setTimeout(() => {\n            clearTimeout(options._t);\n            Object.keys(options).length > 0 ? fn.apply(this, [...args, options]) : fn.apply(this, args);\n        }, options.delay);\n    }\n    runAsync(name, ...args) {\n        const subscribers = this.getSubscribers(name, this._events);\n        console.assert(subscribers && subscribers.length > 0, 'No subscriber for event: ' + name);\n        const promises = subscribers.map(sub => {\n            const { fn, options } = sub;\n            return Object.keys(options).length > 0 ? fn.apply(this, [...args, options]) : fn.apply(this, args);\n        });\n        return Promise.all(promises);\n    }\n    query(name, ...args) {\n        return this.runAsync(name, ...args);\n    }\n    getSubscribers(name, events) {\n        const subscribers = events[name] || [];\n        // Update the list of subscribers by pulling out those which will run once.\n        // We must do this update prior to running any of the events in case they\n        // cause additional events to be turned off or on.\n        events[name] = subscribers.filter((sub) => {\n            return !sub.options.once;\n        });\n        Object.keys(events).filter(evt => evt.endsWith('*') && name.startsWith(evt.replace('*', '')))\n            .sort((a, b) => b.length - a.length)\n            .forEach(evt => subscribers.push(...events[evt].map(sub => (Object.assign(Object.assign({}, sub), { options: Object.assign(Object.assign({}, sub.options), { event: name }) })))));\n        return subscribers;\n    }\n}\nconst AppRunVersions = 'AppRun-3';\nlet app;\nconst root = (typeof self === 'object' && self.self === self && self) ||\n    (typeof global === 'object' && global.global === global && global);\nif (root['app'] && root['_AppRunVersions']) {\n    app = root['app'];\n}\nelse {\n    app = new App();\n    root['app'] = app;\n    root['_AppRunVersions'] = AppRunVersions;\n}\nexport default app;\n//# sourceMappingURL=app.js.map","import { EventOptions} from './types'\nexport class App {\n\n  _events: Object;\n\n  public start;\n  public h;\n  public createElement;\n  public render;\n  public Fragment;\n  public webComponent;\n  public safeHTML;\n  public use_render;\n  public use_react;\n\n  constructor() {\n    this._events = {};\n  }\n\n  on(name: string, fn: (...args) => void, options: EventOptions = {}): void {\n    this._events[name] = this._events[name] || [];\n    this._events[name].push({ fn, options });\n  }\n\n  off(name: string, fn: (...args) => void): void {\n    const subscribers = this._events[name] || [];\n\n    this._events[name] = subscribers.filter((sub) => sub.fn !== fn);\n  }\n\n  find(name: string): any {\n    return this._events[name];\n  }\n\n  run(name: string, ...args): number {\n    const subscribers = this.getSubscribers(name, this._events);\n    console.assert(subscribers && subscribers.length > 0, 'No subscriber for event: ' + name);\n    subscribers.forEach((sub) => {\n      const { fn, options } = sub;\n      if (options.delay) {\n        this.delay(name, fn, args, options);\n      } else {\n        Object.keys(options).length > 0 ? fn.apply(this, [...args, options]) : fn.apply(this, args);\n      }\n      return !sub.options.once;\n    });\n\n    return subscribers.length;\n  }\n\n  once(name: string, fn, options: EventOptions = {}): void {\n    this.on(name, fn, { ...options, once: true });\n  }\n\n  private delay(name, fn, args, options): void {\n    if (options._t) clearTimeout(options._t);\n    options._t = setTimeout(() => {\n      clearTimeout(options._t);\n      Object.keys(options).length > 0 ? fn.apply(this, [...args, options]) : fn.apply(this, args);\n    }, options.delay);\n  }\n\n  runAsync(name: string, ...args): Promise<any[]> {\n    const subscribers = this.getSubscribers(name, this._events);\n    console.assert(subscribers && subscribers.length > 0, 'No subscriber for event: ' + name);\n    const promises = subscribers.map(sub => {\n      const { fn, options } = sub;\n      return Object.keys(options).length > 0 ? fn.apply(this, [...args, options]) : fn.apply(this, args);\n    });\n    return Promise.all(promises);\n  }\n\n  query(name: string, ...args): Promise<any[]> {\n    return this.runAsync(name, ...args);\n  }\n\n  private getSubscribers(name: string, events) {\n    const subscribers = events[name] || [];\n\n    // Update the list of subscribers by pulling out those which will run once.\n    // We must do this update prior to running any of the events in case they\n    // cause additional events to be turned off or on.\n    events[name] = subscribers.filter((sub) => {\n      return !sub.options.once;\n    });\n    Object.keys(events).filter(evt => evt.endsWith('*') && name.startsWith(evt.replace('*', '')))\n      .sort((a, b) => b.length - a.length)\n      .forEach(evt => subscribers.push(...events[evt].map(sub => ({\n        ...sub,\n        options: { ...sub.options, event: name }\n      }))));\n    return subscribers;\n  }\n}\n\nconst AppRunVersions = 'AppRun-3';\nlet app: App;\nconst root = (typeof self === 'object' && self.self === self && self) ||\n  (typeof global === 'object' && global.global === global && global)\nif (root['app'] && root['_AppRunVersions']) {\n  app = root['app'];\n} else {\n  app = new App();\n  root['app'] = app;\n  root['_AppRunVersions'] = AppRunVersions;\n}\nexport default app;\n","import { createElement, updateElement, Fragment, safeHTML } from './vdom-my';\nexport { createElement, Fragment, updateElement as render, safeHTML };\nexport { createElement as jsx, createElement as jsxs };\n\n\n","import directive from './directive';\nexport function Fragment(props, ...children) {\n    return collect(children);\n}\nconst ATTR_PROPS = '_props';\nfunction collect(children) {\n    const ch = [];\n    const push = (c) => {\n        if (c !== null && c !== undefined && c !== '' && c !== false) {\n            ch.push((typeof c === 'function' || typeof c === 'object') ? c : `${c}`);\n        }\n    };\n    children && children.forEach(c => {\n        if (Array.isArray(c)) {\n            c.forEach(i => push(i));\n        }\n        else {\n            push(c);\n        }\n    });\n    return ch;\n}\nexport function createElement(tag, props, ...children) {\n    const ch = collect(children);\n    if (typeof tag === 'string')\n        return { tag, props, children: ch };\n    else if (Array.isArray(tag))\n        return tag; // JSX fragments - babel\n    else if (tag === undefined && children)\n        return ch; // JSX fragments - typescript\n    else if (Object.getPrototypeOf(tag).__isAppRunComponent)\n        return { tag, props, children: ch }; // createComponent(tag, { ...props, children });\n    else if (typeof tag === 'function')\n        return tag(props, ch);\n    else\n        throw new Error(`Unknown tag in vdom ${tag}`);\n}\n;\nconst keyCache = new WeakMap();\nexport const updateElement = (element, nodes, component = {}) => {\n    // tslint:disable-next-line\n    if (nodes == null || nodes === false)\n        return;\n    const el = (typeof element === 'string' && element) ?\n        document.getElementById(element) || document.querySelector(element) : element;\n    nodes = directive(nodes, component);\n    render(el, nodes, component);\n};\nfunction render(element, nodes, parent = {}) {\n    // tslint:disable-next-line\n    if (nodes == null || nodes === false)\n        return;\n    nodes = createComponent(nodes, parent);\n    if (!element)\n        return;\n    const isSvg = element.nodeName === \"SVG\";\n    if (Array.isArray(nodes)) {\n        updateChildren(element, nodes, isSvg);\n    }\n    else {\n        updateChildren(element, [nodes], isSvg);\n    }\n}\nfunction same(el, node) {\n    // if (!el || !node) return false;\n    const key1 = el.nodeName;\n    const key2 = `${node.tag || ''}`;\n    return key1.toUpperCase() === key2.toUpperCase();\n}\nfunction update(element, node, isSvg) {\n    if (node['_op'] === 3)\n        return;\n    // console.assert(!!element);\n    isSvg = isSvg || node.tag === \"svg\";\n    if (!same(element, node)) {\n        element.parentNode.replaceChild(create(node, isSvg), element);\n        return;\n    }\n    !(node['_op'] & 2) && updateChildren(element, node.children, isSvg);\n    !(node['_op'] & 1) && updateProps(element, node.props, isSvg);\n}\nfunction updateChildren(element, children, isSvg) {\n    var _a, _b;\n    const old_len = ((_a = element.childNodes) === null || _a === void 0 ? void 0 : _a.length) || 0;\n    const new_len = (children === null || children === void 0 ? void 0 : children.length) || 0;\n    const len = Math.min(old_len, new_len);\n    for (let i = 0; i < len; i++) {\n        const child = children[i];\n        if (child['_op'] === 3)\n            continue;\n        const el = element.childNodes[i];\n        if (typeof child === 'string') {\n            if (el.textContent !== child) {\n                if (el.nodeType === 3) {\n                    el.nodeValue = child;\n                }\n                else {\n                    element.replaceChild(createText(child), el);\n                }\n            }\n        }\n        else if (child instanceof HTMLElement || child instanceof SVGElement) {\n            element.insertBefore(child, el);\n        }\n        else {\n            const key = child.props && child.props['key'];\n            if (key) {\n                if (el.key === key) {\n                    update(element.childNodes[i], child, isSvg);\n                }\n                else {\n                    // console.log(el.key, key);\n                    const old = keyCache[key];\n                    if (old) {\n                        const temp = old.nextSibling;\n                        element.insertBefore(old, el);\n                        temp ? element.insertBefore(el, temp) : element.appendChild(el);\n                        update(element.childNodes[i], child, isSvg);\n                    }\n                    else {\n                        element.replaceChild(create(child, isSvg), el);\n                    }\n                }\n            }\n            else {\n                update(element.childNodes[i], child, isSvg);\n            }\n        }\n    }\n    let n = ((_b = element.childNodes) === null || _b === void 0 ? void 0 : _b.length) || 0;\n    while (n > len) {\n        element.removeChild(element.lastChild);\n        n--;\n    }\n    if (new_len > len) {\n        const d = document.createDocumentFragment();\n        for (let i = len; i < children.length; i++) {\n            d.appendChild(create(children[i], isSvg));\n        }\n        element.appendChild(d);\n    }\n}\nexport const safeHTML = (html) => {\n    const div = document.createElement('section');\n    div.insertAdjacentHTML('afterbegin', html);\n    return Array.from(div.children);\n};\nfunction createText(node) {\n    if ((node === null || node === void 0 ? void 0 : node.indexOf('_html:')) === 0) { // ?\n        const div = document.createElement('div');\n        div.insertAdjacentHTML('afterbegin', node.substring(6));\n        return div;\n    }\n    else {\n        return document.createTextNode(node !== null && node !== void 0 ? node : '');\n    }\n}\nfunction create(node, isSvg) {\n    // console.assert(node !== null && node !== undefined);\n    if ((node instanceof HTMLElement) || (node instanceof SVGElement))\n        return node;\n    if (typeof node === \"string\")\n        return createText(node);\n    if (!node.tag || (typeof node.tag === 'function'))\n        return createText(JSON.stringify(node));\n    isSvg = isSvg || node.tag === \"svg\";\n    const element = isSvg\n        ? document.createElementNS(\"http://www.w3.org/2000/svg\", node.tag)\n        : document.createElement(node.tag);\n    updateProps(element, node.props, isSvg);\n    if (node.children)\n        node.children.forEach(child => element.appendChild(create(child, isSvg)));\n    return element;\n}\nfunction mergeProps(oldProps, newProps) {\n    newProps['class'] = newProps['class'] || newProps['className'];\n    delete newProps['className'];\n    const props = {};\n    if (oldProps)\n        Object.keys(oldProps).forEach(p => props[p] = null);\n    if (newProps)\n        Object.keys(newProps).forEach(p => props[p] = newProps[p]);\n    return props;\n}\nexport function updateProps(element, props, isSvg) {\n    // console.assert(!!element);\n    const cached = element[ATTR_PROPS] || {};\n    props = mergeProps(cached, props || {});\n    element[ATTR_PROPS] = props;\n    for (const name in props) {\n        const value = props[name];\n        // if (cached[name] === value) continue;\n        // console.log('updateProps', name, value);\n        if (name.startsWith('data-')) {\n            const dname = name.substring(5);\n            const cname = dname.replace(/-(\\w)/g, (match) => match[1].toUpperCase());\n            if (element.dataset[cname] !== value) {\n                if (value || value === \"\")\n                    element.dataset[cname] = value;\n                else\n                    delete element.dataset[cname];\n            }\n        }\n        else if (name === 'style') {\n            if (element.style.cssText)\n                element.style.cssText = '';\n            if (typeof value === 'string')\n                element.style.cssText = value;\n            else {\n                for (const s in value) {\n                    if (element.style[s] !== value[s])\n                        element.style[s] = value[s];\n                }\n            }\n        }\n        else if (name.startsWith('xlink')) {\n            const xname = name.replace('xlink', '').toLowerCase();\n            if (value == null || value === false) {\n                element.removeAttributeNS('http://www.w3.org/1999/xlink', xname);\n            }\n            else {\n                element.setAttributeNS('http://www.w3.org/1999/xlink', xname, value);\n            }\n        }\n        else if (name.startsWith('on')) {\n            if (!value || typeof value === 'function') {\n                element[name] = value;\n            }\n            else if (typeof value === 'string') {\n                if (value)\n                    element.setAttribute(name, value);\n                else\n                    element.removeAttribute(name);\n            }\n        }\n        else if (/^id$|^class$|^list$|^readonly$|^contenteditable$|^role|-|^for$/g.test(name) || isSvg) {\n            if (element.getAttribute(name) !== value) {\n                if (value)\n                    element.setAttribute(name, value);\n                else\n                    element.removeAttribute(name);\n            }\n        }\n        else if (element[name] !== value) {\n            element[name] = value;\n        }\n        if (name === 'key' && value)\n            keyCache[value] = element;\n    }\n    if (props && typeof props['ref'] === 'function') {\n        window.requestAnimationFrame(() => props['ref'](element));\n    }\n}\nfunction render_component(node, parent, idx) {\n    const { tag, props, children } = node;\n    let key = `_${idx}`;\n    let id = props && props['id'];\n    if (!id)\n        id = `_${idx}${Date.now()}`;\n    else\n        key = id;\n    let asTag = 'section';\n    if (props && props['as']) {\n        asTag = props['as'];\n        delete props['as'];\n    }\n    if (!parent.__componentCache)\n        parent.__componentCache = {};\n    let component = parent.__componentCache[key];\n    if (!component || !(component instanceof tag) || !component.element) {\n        const element = document.createElement(asTag);\n        component = parent.__componentCache[key] = new tag(Object.assign(Object.assign({}, props), { children })).mount(element, { render: true });\n    }\n    else {\n        component.renderState(component.state);\n    }\n    if (component.mounted) {\n        const new_state = component.mounted(props, children, component.state);\n        (typeof new_state !== 'undefined') && component.setState(new_state);\n    }\n    updateProps(component.element, props, false);\n    return component.element;\n}\nfunction createComponent(node, parent, idx = 0) {\n    var _a;\n    if (typeof node === 'string')\n        return node;\n    if (Array.isArray(node))\n        return node.map(child => createComponent(child, parent, idx++));\n    let vdom = node;\n    if (node && typeof node.tag === 'function' && Object.getPrototypeOf(node.tag).__isAppRunComponent) {\n        vdom = render_component(node, parent, idx);\n    }\n    if (vdom && Array.isArray(vdom.children)) {\n        const new_parent = (_a = vdom.props) === null || _a === void 0 ? void 0 : _a._component;\n        if (new_parent) {\n            let i = 0;\n            vdom.children = vdom.children.map(child => createComponent(child, new_parent, i++));\n        }\n        else {\n            vdom.children = vdom.children.map(child => createComponent(child, parent, idx++));\n        }\n    }\n    return vdom;\n}\n//# sourceMappingURL=vdom-my.js.map","import { VDOM, VNode } from './types';\nimport directive from './directive';\nexport type Element = any; //HTMLElement | SVGSVGElement | SVGElement;\n\nexport function Fragment(props, ...children): any[] {\n  return collect(children);\n}\n\nconst ATTR_PROPS = '_props';\n\nfunction collect(children) {\n  const ch = [];\n  const push = (c) => {\n    if (c !== null && c !== undefined && c !== '' && c !== false) {\n      ch.push((typeof c === 'function' || typeof c === 'object') ? c : `${c}`);\n    }\n  }\n  children && children.forEach(c => {\n    if (Array.isArray(c)) {\n      c.forEach(i => push(i));\n    } else {\n      push(c);\n    }\n  });\n  return ch;\n}\n\nexport function createElement(tag: string | Function | [], props?: {}, ...children) {\n  const ch = collect(children);\n  if (typeof tag === 'string') return { tag, props, children: ch };\n  else if (Array.isArray(tag)) return tag; // JSX fragments - babel\n  else if (tag === undefined && children) return ch; // JSX fragments - typescript\n  else if (Object.getPrototypeOf(tag).__isAppRunComponent) return { tag, props, children: ch } // createComponent(tag, { ...props, children });\n  else if (typeof tag === 'function') return tag(props, ch);\n  else throw new Error(`Unknown tag in vdom ${tag}`);\n};\n\nconst keyCache = new WeakMap();\n\nexport const updateElement = (element: Element | string, nodes: VDOM, component = {}) => {\n  // tslint:disable-next-line\n  if (nodes == null || nodes === false) return;\n  const el = (typeof element === 'string' && element) ?\n    document.getElementById(element) || document.querySelector(element) : element;\n  nodes = directive(nodes, component);\n  render(el, nodes, component);\n}\n\nfunction render(element: Element, nodes: VDOM, parent = {}) {\n  // tslint:disable-next-line\n  if (nodes == null || nodes === false) return;\n  nodes = createComponent(nodes, parent);\n  if (!element) return;\n  const isSvg = element.nodeName === \"SVG\";\n  if (Array.isArray(nodes)) {\n    updateChildren(element, nodes, isSvg);\n  } else {\n    updateChildren(element, [nodes], isSvg);\n  }\n}\n\nfunction same(el: Element, node: VNode) {\n  // if (!el || !node) return false;\n  const key1 = el.nodeName;\n  const key2 = `${node.tag || ''}`;\n  return key1.toUpperCase() === key2.toUpperCase();\n}\n\nfunction update(element: Element, node: VNode, isSvg: boolean) {\n  if (node['_op'] === 3) return;\n  // console.assert(!!element);\n  isSvg = isSvg || node.tag === \"svg\";\n  if (!same(element, node)) {\n    element.parentNode.replaceChild(create(node, isSvg), element);\n    return;\n  }\n  !(node['_op'] & 2) && updateChildren(element, node.children, isSvg);\n  !(node['_op'] & 1) && updateProps(element, node.props, isSvg);\n}\n\nfunction updateChildren(element, children, isSvg: boolean) {\n  const old_len = element.childNodes?.length || 0;\n  const new_len = children?.length || 0;\n  const len = Math.min(old_len, new_len);\n  for (let i = 0; i < len; i++) {\n    const child = children[i];\n    if (child['_op'] === 3) continue;\n    const el = element.childNodes[i];\n    if (typeof child === 'string') {\n      if (el.textContent !== child) {\n        if (el.nodeType === 3) {\n          el.nodeValue = child\n        } else {\n          element.replaceChild(createText(child), el);\n        }\n      }\n    } else if (child instanceof HTMLElement || child instanceof SVGElement) {\n      element.insertBefore(child, el);\n    } else {\n      const key = child.props && child.props['key'];\n      if (key) {\n        if (el.key === key) {\n          update(element.childNodes[i], child, isSvg);\n        } else {\n          // console.log(el.key, key);\n          const old = keyCache[key];\n          if (old) {\n            const temp = old.nextSibling;\n            element.insertBefore(old, el);\n            temp ? element.insertBefore(el, temp) : element.appendChild(el);\n            update(element.childNodes[i], child, isSvg);\n          } else {\n            element.replaceChild(create(child, isSvg), el);\n          }\n        }\n      } else {\n        update(element.childNodes[i], child, isSvg);\n      }\n    }\n  }\n\n  let n = element.childNodes?.length || 0;\n  while (n > len) {\n    element.removeChild(element.lastChild);\n    n--;\n  }\n\n  if (new_len > len) {\n    const d = document.createDocumentFragment();\n    for (let i = len; i < children.length; i++) {\n      d.appendChild(create(children[i], isSvg));\n    }\n    element.appendChild(d);\n  }\n}\n\nexport const safeHTML = (html: string) => {\n  const div = document.createElement('section');\n  div.insertAdjacentHTML('afterbegin', html)\n  return Array.from(div.children);\n}\n\nfunction createText(node) {\n  if (node?.indexOf('_html:') === 0) { // ?\n    const div = document.createElement('div');\n    div.insertAdjacentHTML('afterbegin', node.substring(6))\n    return div;\n  } else {\n    return document.createTextNode(node??'');\n  }\n}\n\nfunction create(node: VNode | string | HTMLElement | SVGElement, isSvg: boolean): Element {\n  // console.assert(node !== null && node !== undefined);\n  if ((node instanceof HTMLElement) || (node instanceof SVGElement)) return node;\n  if (typeof node === \"string\") return createText(node);\n  if (!node.tag || (typeof node.tag === 'function')) return createText(JSON.stringify(node));\n  isSvg = isSvg || node.tag === \"svg\";\n  const element = isSvg\n    ? document.createElementNS(\"http://www.w3.org/2000/svg\", node.tag)\n    : document.createElement(node.tag);\n\n  updateProps(element, node.props, isSvg);\n  if (node.children) node.children.forEach(child => element.appendChild(create(child, isSvg)));\n  return element\n}\n\nfunction mergeProps(oldProps: {}, newProps: {}): {} {\n  newProps['class'] = newProps['class'] || newProps['className'];\n  delete newProps['className'];\n  const props = {};\n  if (oldProps) Object.keys(oldProps).forEach(p => props[p] = null);\n  if (newProps) Object.keys(newProps).forEach(p => props[p] = newProps[p]);\n  return props;\n}\n\nexport function updateProps(element: Element, props: {}, isSvg) {\n  // console.assert(!!element);\n  const cached = element[ATTR_PROPS] || {};\n  props = mergeProps(cached, props || {});\n  element[ATTR_PROPS] = props;\n\n  for (const name in props) {\n    const value = props[name];\n    // if (cached[name] === value) continue;\n    // console.log('updateProps', name, value);\n    if (name.startsWith('data-')) {\n      const dname = name.substring(5);\n      const cname = dname.replace(/-(\\w)/g, (match) => match[1].toUpperCase());\n      if (element.dataset[cname] !== value) {\n        if (value || value === \"\") element.dataset[cname] = value;\n        else delete element.dataset[cname];\n      }\n    } else if (name === 'style') {\n      if (element.style.cssText) element.style.cssText = '';\n      if (typeof value === 'string') element.style.cssText = value;\n      else {\n        for (const s in value) {\n          if (element.style[s] !== value[s]) element.style[s] = value[s];\n        }\n      }\n    } else if (name.startsWith('xlink')) {\n      const xname = name.replace('xlink', '').toLowerCase();\n      if (value == null || value === false) {\n        element.removeAttributeNS('http://www.w3.org/1999/xlink', xname);\n      } else {\n        element.setAttributeNS('http://www.w3.org/1999/xlink', xname, value);\n      }\n    } else if (name.startsWith('on')) {\n      if (!value || typeof value === 'function') {\n        element[name] = value;\n      } else if (typeof value === 'string') {\n        if (value) element.setAttribute(name, value);\n        else element.removeAttribute(name);\n      }\n    } else if (/^id$|^class$|^list$|^readonly$|^contenteditable$|^role|-|^for$/g.test(name) || isSvg) {\n      if (element.getAttribute(name) !== value) {\n        if (value) element.setAttribute(name, value);\n        else element.removeAttribute(name);\n      }\n    } else if (element[name] !== value) {\n      element[name] = value;\n    }\n    if (name === 'key' && value) keyCache[value] = element;\n  }\n  if (props && typeof props['ref'] === 'function') {\n    window.requestAnimationFrame(() => props['ref'](element));\n  }\n}\n\nfunction render_component(node, parent, idx) {\n  const { tag, props, children } = node;\n  let key = `_${idx}`;\n  let id = props && props['id'];\n  if (!id) id = `_${idx}${Date.now()}`;\n  else key = id;\n  let asTag = 'section';\n  if (props && props['as']) {\n    asTag = props['as'];\n    delete props['as'];\n  }\n  if (!parent.__componentCache) parent.__componentCache = {};\n  let component = parent.__componentCache[key];\n  if (!component || !(component instanceof tag) || !component.element) {\n    const element = document.createElement(asTag);\n    component = parent.__componentCache[key] = new tag({ ...props, children }).mount(element, { render: true });\n  } else {\n    component.renderState(component.state);\n  }\n  if (component.mounted) {\n    const new_state = component.mounted(props, children, component.state);\n    (typeof new_state !== 'undefined') && component.setState(new_state);\n  }\n  updateProps(component.element, props, false);\n  return component.element;\n}\n\nfunction createComponent(node, parent, idx = 0) {\n  if (typeof node === 'string') return node;\n  if (Array.isArray(node)) return node.map(child => createComponent(child, parent, idx++));\n  let vdom = node;\n  if (node && typeof node.tag === 'function' && Object.getPrototypeOf(node.tag).__isAppRunComponent) {\n    vdom = render_component(node, parent, idx);\n  }\n  if (vdom && Array.isArray(vdom.children)) {\n    const new_parent = vdom.props?._component;\n    if (new_parent) {\n      let i = 0;\n      vdom.children = vdom.children.map(child => createComponent(child, new_parent, i++));\n    } else {\n      vdom.children = vdom.children.map(child => createComponent(child, parent, idx++));\n    }\n  }\n  return vdom;\n}\n","import app from './app';\nconst getStateValue = (component, name) => {\n    return (name ? component['state'][name] : component['state']) || '';\n};\nconst setStateValue = (component, name, value) => {\n    if (name) {\n        const state = component['state'] || {};\n        state[name] = value;\n        component.setState(state);\n    }\n    else {\n        component.setState(value);\n    }\n};\nconst apply_directive = (key, props, tag, component) => {\n    if (key.startsWith('$on')) {\n        const event = props[key];\n        key = key.substring(1);\n        if (typeof event === 'boolean') {\n            props[key] = e => component.run ? component.run(key, e) : app.run(key, e);\n        }\n        else if (typeof event === 'string') {\n            props[key] = e => component.run ? component.run(event, e) : app.run(event, e);\n        }\n        else if (typeof event === 'function') {\n            props[key] = e => component.setState(event(component.state, e));\n        }\n        else if (Array.isArray(event)) {\n            const [handler, ...p] = event;\n            if (typeof handler === 'string') {\n                props[key] = e => component.run ? component.run(handler, ...p, e) : app.run(handler, ...p, e);\n            }\n            else if (typeof handler === 'function') {\n                props[key] = e => component.setState(handler(component.state, ...p, e));\n            }\n        }\n    }\n    else if (key === '$bind') {\n        const type = props['type'] || 'text';\n        const name = typeof props[key] === 'string' ? props[key] : props['name'];\n        if (tag === 'input') {\n            switch (type) {\n                case 'checkbox':\n                    props['checked'] = getStateValue(component, name);\n                    props['onclick'] = e => setStateValue(component, name || e.target.name, e.target.checked);\n                    break;\n                case 'radio':\n                    props['checked'] = getStateValue(component, name) === props['value'];\n                    props['onclick'] = e => setStateValue(component, name || e.target.name, e.target.value);\n                    break;\n                case 'number':\n                case 'range':\n                    props['value'] = getStateValue(component, name);\n                    props['oninput'] = e => setStateValue(component, name || e.target.name, Number(e.target.value));\n                    break;\n                default:\n                    props['value'] = getStateValue(component, name);\n                    props['oninput'] = e => setStateValue(component, name || e.target.name, e.target.value);\n            }\n        }\n        else if (tag === 'select') {\n            props['value'] = getStateValue(component, name);\n            props['onchange'] = e => {\n                if (!e.target.multiple) { // multiple selection use $bind on option\n                    setStateValue(component, name || e.target.name, e.target.value);\n                }\n            };\n        }\n        else if (tag === 'option') {\n            props['selected'] = getStateValue(component, name);\n            props['onclick'] = e => setStateValue(component, name || e.target.name, e.target.selected);\n        }\n        else if (tag === 'textarea') {\n            props['innerHTML'] = getStateValue(component, name);\n            props['oninput'] = e => setStateValue(component, name || e.target.name, e.target.value);\n        }\n    }\n    else {\n        app.run('$', { key, tag, props, component });\n    }\n};\nconst directive = (vdom, component) => {\n    if (Array.isArray(vdom)) {\n        return vdom.map(element => directive(element, component));\n    }\n    else {\n        let { type, tag, props, children } = vdom;\n        tag = tag || type;\n        children = children || (props === null || props === void 0 ? void 0 : props.children);\n        if (props)\n            Object.keys(props).forEach(key => {\n                if (key.startsWith('$')) {\n                    apply_directive(key, props, tag, component);\n                    delete props[key];\n                }\n            });\n        if (children)\n            directive(children, component);\n        return vdom;\n    }\n};\nexport default directive;\n//# sourceMappingURL=directive.js.map","import app from './app';\n\nconst getStateValue = (component, name) => {\n  return (name ? component['state'][name] : component['state']) || '';\n}\n\nconst setStateValue = (component, name, value) => {\n  if (name) {\n    const state = component['state'] || {};\n    state[name] = value;\n    component.setState(state);\n  } else {\n    component.setState(value);\n  }\n}\n\nconst apply_directive = (key: string, props: {}, tag, component) => {\n  if (key.startsWith('$on')) {\n    const event = props[key];\n    key = key.substring(1)\n    if (typeof event === 'boolean') {\n      props[key] = e => component.run ? component.run(key, e) : app.run(key, e);\n    } else if (typeof event === 'string') {\n      props[key] = e => component.run ? component.run(event, e) : app.run(event, e);\n    } else if (typeof event === 'function') {\n      props[key] = e => component.setState(event(component.state, e));\n    } else if (Array.isArray(event)) {\n      const [handler, ...p] = event;\n      if (typeof handler === 'string') {\n        props[key] = e => component.run ? component.run(handler, ...p, e) : app.run(handler, ...p, e);\n      } else if (typeof handler === 'function') {\n        props[key] = e => component.setState(handler(component.state, ...p, e));\n      }\n    }\n\n  } else if (key === '$bind') {\n    const type = props['type'] || 'text';\n    const name = typeof props[key] === 'string' ? props[key] : props['name'];\n    if (tag === 'input') {\n      switch (type) {\n        case 'checkbox':\n          props['checked'] = getStateValue(component, name);\n          props['onclick'] = e => setStateValue(component, name || e.target.name, e.target.checked);\n          break;\n        case 'radio':\n          props['checked'] = getStateValue(component, name) === props['value'];\n          props['onclick'] = e => setStateValue(component, name || e.target.name, e.target.value);\n          break;\n        case 'number':\n        case 'range':\n          props['value'] = getStateValue(component, name);\n          props['oninput'] = e => setStateValue(component, name || e.target.name, Number(e.target.value));\n          break;\n        default:\n          props['value'] = getStateValue(component, name);\n          props['oninput'] = e => setStateValue(component, name || e.target.name, e.target.value);\n      }\n    } else if (tag === 'select') {\n      props['value'] = getStateValue(component, name);\n      props['onchange'] = e => {\n        if (!e.target.multiple) { // multiple selection use $bind on option\n          setStateValue(component, name || e.target.name, e.target.value);\n        }\n      }\n    } else if (tag === 'option') {\n      props['selected'] = getStateValue(component, name);\n      props['onclick'] = e => setStateValue(component, name || e.target.name, e.target.selected);\n    } else if (tag === 'textarea') {\n      props['innerHTML'] = getStateValue(component, name);\n      props['oninput'] = e => setStateValue(component, name || e.target.name, e.target.value);\n    }\n  } else {\n    app.run('$', { key, tag, props, component });\n  }\n}\n\nconst directive = (vdom, component) => {\n  if (Array.isArray(vdom)) {\n    return vdom.map(element => directive(element, component));\n  } else {\n    let { type, tag, props, children } = vdom;\n    tag = tag || type;\n    children = children || props?.children;\n    if (props) Object.keys(props).forEach(key => {\n      if (key.startsWith('$')) {\n        apply_directive(key, props, tag, component);\n        delete props[key];\n      }\n    });\n    if (children) directive(children, component);\n    return vdom;\n  }\n}\n\nexport default directive;","import app, { App } from './app';\nimport { Reflect } from './decorator';\nimport directive from './directive';\nconst componentCache = new Map();\nif (!app.find('get-components'))\n    app.on('get-components', o => o.components = componentCache);\nconst REFRESH = state => state;\nexport class Component {\n    renderState(state, vdom = null) {\n        if (!this.view)\n            return;\n        let html = vdom || this.view(state);\n        app['debug'] && app.run('debug', {\n            component: this,\n            _: html ? '.' : '-',\n            state,\n            vdom: html,\n            el: this.element\n        });\n        if (typeof document !== 'object')\n            return;\n        const el = (typeof this.element === 'string' && this.element) ?\n            document.getElementById(this.element) || document.querySelector(this.element) : this.element;\n        if (!el)\n            return;\n        const tracking_attr = '_c';\n        if (!this.unload) {\n            el.removeAttribute && el.removeAttribute(tracking_attr);\n        }\n        else if (el['_component'] !== this || el.getAttribute(tracking_attr) !== this.tracking_id) {\n            this.tracking_id = new Date().valueOf().toString();\n            el.setAttribute(tracking_attr, this.tracking_id);\n            if (typeof MutationObserver !== 'undefined') {\n                if (!this.observer)\n                    this.observer = new MutationObserver(changes => {\n                        if (changes[0].oldValue === this.tracking_id || !document.body.contains(el)) {\n                            this.unload(this.state);\n                            this.observer.disconnect();\n                            this.observer = null;\n                        }\n                    });\n                this.observer.observe(document.body, {\n                    childList: true, subtree: true,\n                    attributes: true, attributeOldValue: true, attributeFilter: [tracking_attr]\n                });\n            }\n        }\n        el['_component'] = this;\n        if (!vdom && html) {\n            html = directive(html, this);\n            if (this.options.transition && document && document['startViewTransition']) {\n                document['startViewTransition'](() => app.render(el, html, this));\n            }\n            else {\n                app.render(el, html, this);\n            }\n        }\n        this.rendered && this.rendered(this.state);\n    }\n    setState(state, options = { render: true, history: false }) {\n        if (state instanceof Promise) {\n            // Promise will not be saved or rendered\n            // state will be saved and rendered when promise is resolved\n            Promise.resolve(state).then(v => {\n                this.setState(v, options);\n                this._state = state;\n            });\n        }\n        else {\n            this._state = state;\n            if (state == null)\n                return;\n            this.state = state;\n            if (options.render !== false) {\n                // before render state\n                if (options.transition && document && document['startViewTransition']) {\n                    document['startViewTransition'](() => this.renderState(state));\n                }\n                else {\n                    this.renderState(state);\n                }\n            }\n            if (options.history !== false && this.enable_history) {\n                this._history = [...this._history, state];\n                this._history_idx = this._history.length - 1;\n            }\n            if (typeof options.callback === 'function')\n                options.callback(this.state);\n        }\n    }\n    constructor(state, view, update, options) {\n        this.state = state;\n        this.view = view;\n        this.update = update;\n        this.options = options;\n        this._app = new App();\n        this._actions = [];\n        this._global_events = [];\n        this._history = [];\n        this._history_idx = -1;\n        this._history_prev = () => {\n            this._history_idx--;\n            if (this._history_idx >= 0) {\n                this.setState(this._history[this._history_idx], { render: true, history: false });\n            }\n            else {\n                this._history_idx = 0;\n            }\n        };\n        this._history_next = () => {\n            this._history_idx++;\n            if (this._history_idx < this._history.length) {\n                this.setState(this._history[this._history_idx], { render: true, history: false });\n            }\n            else {\n                this._history_idx = this._history.length - 1;\n            }\n        };\n        this.start = (element = null, options) => {\n            this.mount(element, Object.assign({ render: true }, options));\n            if (this.mounted && typeof this.mounted === 'function') {\n                const new_state = this.mounted({}, [], this.state);\n                (typeof new_state !== 'undefined') && this.setState(new_state);\n            }\n            return this;\n        };\n    }\n    mount(element = null, options) {\n        var _a, _b;\n        console.assert(!this.element, 'Component already mounted.');\n        this.options = options = Object.assign(Object.assign({}, this.options), options);\n        this.element = element;\n        this.global_event = options.global_event;\n        this.enable_history = !!options.history;\n        if (this.enable_history) {\n            this.on(options.history.prev || 'history-prev', this._history_prev);\n            this.on(options.history.next || 'history-next', this._history_next);\n        }\n        if (options.route) {\n            this.update = this.update || {};\n            if (!this.update[options.route])\n                this.update[options.route] = REFRESH;\n        }\n        this.add_actions();\n        this.state = (_b = (_a = this.state) !== null && _a !== void 0 ? _a : this['model']) !== null && _b !== void 0 ? _b : {};\n        if (typeof this.state === 'function')\n            this.state = this.state();\n        this.setState(this.state, { render: !!options.render, history: true });\n        if (app['debug']) {\n            if (componentCache.get(element)) {\n                componentCache.get(element).push(this);\n            }\n            else {\n                componentCache.set(element, [this]);\n            }\n        }\n        return this;\n    }\n    is_global_event(name) {\n        return name && (this.global_event ||\n            this._global_events.indexOf(name) >= 0 ||\n            name.startsWith('#') || name.startsWith('/') || name.startsWith('@'));\n    }\n    add_action(name, action, options = {}) {\n        if (!action || typeof action !== 'function')\n            return;\n        if (options.global)\n            this._global_events.push(name);\n        this.on(name, (...p) => {\n            app['debug'] && app.run('debug', {\n                component: this,\n                _: '>',\n                event: name, p,\n                current_state: this.state,\n                options\n            });\n            const newState = action(this.state, ...p);\n            app['debug'] && app.run('debug', {\n                component: this,\n                _: '<',\n                event: name, p,\n                newState,\n                state: this.state,\n                options\n            });\n            this.setState(newState, options);\n        }, options);\n    }\n    add_actions() {\n        const actions = this.update || {};\n        Reflect.getMetadataKeys(this).forEach(key => {\n            if (key.startsWith('apprun-update:')) {\n                const meta = Reflect.getMetadata(key, this);\n                actions[meta.name] = [this[meta.key].bind(this), meta.options];\n            }\n        });\n        const all = {};\n        if (Array.isArray(actions)) {\n            actions.forEach(act => {\n                const [name, action, opts] = act;\n                const names = name.toString();\n                names.split(',').forEach(n => all[n.trim()] = [action, opts]);\n            });\n        }\n        else {\n            Object.keys(actions).forEach(name => {\n                const action = actions[name];\n                if (typeof action === 'function' || Array.isArray(action)) {\n                    name.split(',').forEach(n => all[n.trim()] = action);\n                }\n            });\n        }\n        if (!all['.'])\n            all['.'] = REFRESH;\n        Object.keys(all).forEach(name => {\n            const action = all[name];\n            if (typeof action === 'function') {\n                this.add_action(name, action);\n            }\n            else if (Array.isArray(action)) {\n                this.add_action(name, action[0], action[1]);\n            }\n        });\n    }\n    run(event, ...args) {\n        if (this.state instanceof Promise) {\n            return Promise.resolve(this.state).then(state => {\n                this.state = state;\n                this.run(event, ...args);\n            });\n        }\n        else {\n            const name = event.toString();\n            return this.is_global_event(name) ?\n                app.run(name, ...args) :\n                this._app.run(name, ...args);\n        }\n    }\n    on(event, fn, options) {\n        const name = event.toString();\n        this._actions.push({ name, fn });\n        return this.is_global_event(name) ?\n            app.on(name, fn, options) :\n            this._app.on(name, fn, options);\n    }\n    runAsync(event, ...args) {\n        const name = event.toString();\n        return this.is_global_event(name) ?\n            app.runAsync(name, ...args) :\n            this._app.runAsync(name, ...args);\n    }\n    // obsolete\n    query(event, ...args) {\n        return this.runAsync(event, ...args);\n    }\n    unmount() {\n        var _a;\n        (_a = this.observer) === null || _a === void 0 ? void 0 : _a.disconnect();\n        this._actions.forEach(action => {\n            const { name, fn } = action;\n            this.is_global_event(name) ?\n                app.off(name, fn) :\n                this._app.off(name, fn);\n        });\n    }\n}\nComponent.__isAppRunComponent = true;\n//# sourceMappingURL=component.js.map","\r\nimport app, { App } from './app';\r\nimport { Reflect } from './decorator'\r\nimport { View, Update, ActionDef, ActionOptions, MountOptions, EventOptions } from './types';\r\nimport directive from './directive';\r\n\r\nconst componentCache = new Map();\r\nif (!app.find('get-components')) app.on('get-components', o => o.components = componentCache);\r\n\r\nconst REFRESH = state => state;\r\n\r\nexport class Component<T = any, E = any> {\r\n  static __isAppRunComponent = true;\r\n  private _app = new App();\r\n  private _actions = [];\r\n  private _global_events = [];\r\n  private _state;\r\n  private _history = [];\r\n  private _history_idx = -1;\r\n  private enable_history;\r\n  private global_event;\r\n  public element;\r\n  public rendered;\r\n  public mounted;\r\n  public unload;\r\n  private tracking_id;\r\n  private observer;\r\n\r\n\r\n  private renderState(state: T, vdom = null) {\r\n    if (!this.view) return;\r\n    let html = vdom || this.view(state);\r\n    app['debug'] && app.run('debug', {\r\n      component: this,\r\n      _: html ? '.' : '-',\r\n      state,\r\n      vdom: html,\r\n      el: this.element\r\n    });\r\n\r\n    if (typeof document !== 'object') return;\r\n\r\n    const el = (typeof this.element === 'string' && this.element) ?\r\n      document.getElementById(this.element) || document.querySelector(this.element) : this.element;\r\n\r\n    if (!el) return;\r\n    const tracking_attr = '_c';\r\n    if (!this.unload) {\r\n      el.removeAttribute && el.removeAttribute(tracking_attr);\r\n    } else if (el['_component'] !== this || el.getAttribute(tracking_attr) !== this.tracking_id) {\r\n      this.tracking_id = new Date().valueOf().toString();\r\n      el.setAttribute(tracking_attr, this.tracking_id);\r\n      if (typeof MutationObserver !== 'undefined') {\r\n        if (!this.observer) this.observer = new MutationObserver(changes => {\r\n          if (changes[0].oldValue === this.tracking_id || !document.body.contains(el)) {\r\n            this.unload(this.state);\r\n            this.observer.disconnect();\r\n            this.observer = null;\r\n          }\r\n        });\r\n        this.observer.observe(document.body, {\r\n          childList: true, subtree: true,\r\n          attributes: true, attributeOldValue: true, attributeFilter: [tracking_attr]\r\n        });\r\n      }\r\n    }\r\n    el['_component'] = this;\r\n\r\n    if (!vdom && html) {\r\n      html = directive(html, this);\r\n      if (this.options.transition && document && document['startViewTransition']) {\r\n        document['startViewTransition'](() => app.render(el, html, this));\r\n      } else {\r\n        app.render(el, html, this);\r\n      }\r\n    }\r\n    this.rendered && this.rendered(this.state);\r\n  }\r\n\r\n  public setState(state: T, options: ActionOptions & EventOptions\r\n    = { render: true, history: false }) {\r\n    if (state instanceof Promise) {\r\n      // Promise will not be saved or rendered\r\n      // state will be saved and rendered when promise is resolved\r\n      Promise.resolve(state).then(v => {\r\n        this.setState(v, options);\r\n        this._state = state;\r\n      });\r\n    } else {\r\n      this._state = state;\r\n      if (state == null) return;\r\n      this.state = state;\r\n      if (options.render !== false) {\r\n        // before render state\r\n        if (options.transition && document && document['startViewTransition']) {\r\n          document['startViewTransition'](() => this.renderState(state));\r\n        } else {\r\n          this.renderState(state);\r\n        }\r\n      }\r\n      if (options.history !== false && this.enable_history) {\r\n        this._history = [...this._history, state];\r\n        this._history_idx = this._history.length - 1;\r\n      }\r\n      if (typeof options.callback === 'function') options.callback(this.state);\r\n    }\r\n  }\r\n\r\n  private _history_prev = () => {\r\n    this._history_idx--;\r\n    if (this._history_idx >= 0) {\r\n      this.setState(this._history[this._history_idx], { render: true, history: false });\r\n    }\r\n    else {\r\n      this._history_idx = 0;\r\n    }\r\n  };\r\n\r\n  private _history_next = () => {\r\n    this._history_idx++;\r\n    if (this._history_idx < this._history.length) {\r\n      this.setState(this._history[this._history_idx], { render: true, history: false });\r\n    }\r\n    else {\r\n      this._history_idx = this._history.length - 1;\r\n    }\r\n  };\r\n\r\n  constructor(\r\n    protected state?: T,\r\n    protected view?: View<T>,\r\n    protected update?: Update<T, E>,\r\n    protected options?) {\r\n  }\r\n\r\n  start = (element = null, options?: MountOptions): Component<T, E> => {\r\n    this.mount(element, { render: true, ...options });\r\n    if (this.mounted && typeof this.mounted === 'function') {\r\n      const new_state = this.mounted({}, [], this.state);\r\n      (typeof new_state !== 'undefined') && this.setState(new_state);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  public mount(element = null, options?: MountOptions): Component<T, E> {\r\n    console.assert(!this.element, 'Component already mounted.')\r\n    this.options = options = { ...this.options, ...options };\r\n    this.element = element;\r\n    this.global_event = options.global_event;\r\n    this.enable_history = !!options.history;\r\n\r\n    if (this.enable_history) {\r\n      this.on(options.history.prev || 'history-prev', this._history_prev);\r\n      this.on(options.history.next || 'history-next', this._history_next);\r\n    }\r\n\r\n    if (options.route) {\r\n      this.update = this.update || {};\r\n      if (!this.update[options.route]) this.update[options.route] = REFRESH;\r\n    }\r\n\r\n    this.add_actions();\r\n    this.state = this.state ?? this['model'] ?? {};\r\n    if (typeof this.state === 'function') this.state = this.state();\r\n\r\n    this.setState(this.state, { render: !!options.render, history: true });\r\n\r\n    if (app['debug']) {\r\n      if (componentCache.get(element)) { componentCache.get(element).push(this) }\r\n      else { componentCache.set(element, [this]) }\r\n    }\r\n    return this;\r\n  }\r\n\r\n  is_global_event(name: string): boolean {\r\n    return name && (\r\n      this.global_event ||\r\n      this._global_events.indexOf(name) >= 0 ||\r\n      name.startsWith('#') || name.startsWith('/') || name.startsWith('@'));\r\n  }\r\n\r\n  add_action(name: string, action, options: ActionOptions = {}) {\r\n    if (!action || typeof action !== 'function') return;\r\n    if (options.global) this._global_events.push(name);\r\n    this.on(name as any, (...p) => {\r\n\r\n      app['debug'] && app.run('debug', {\r\n        component: this,\r\n        _: '>',\r\n        event: name, p,\r\n        current_state: this.state,\r\n        options\r\n      });\r\n\r\n      const newState = action(this.state, ...p);\r\n\r\n      app['debug'] && app.run('debug', {\r\n        component: this,\r\n        _: '<',\r\n        event: name, p,\r\n        newState,\r\n        state: this.state,\r\n        options\r\n      });\r\n\r\n      this.setState(newState, options)\r\n    }, options);\r\n  }\r\n\r\n  add_actions() {\r\n    const actions = this.update || {};\r\n    Reflect.getMetadataKeys(this).forEach(key => {\r\n      if (key.startsWith('apprun-update:')) {\r\n        const meta = Reflect.getMetadata(key, this)\r\n        actions[meta.name] = [this[meta.key].bind(this), meta.options];\r\n      }\r\n    })\r\n\r\n    const all = {};\r\n    if (Array.isArray(actions)) {\r\n      actions.forEach(act => {\r\n        const [name, action, opts] = act as ActionDef<T, E>;\r\n        const names = name.toString();\r\n        names.split(',').forEach(n => all[n.trim()] = [action, opts])\r\n      })\r\n    } else {\r\n      Object.keys(actions).forEach(name => {\r\n        const action = actions[name];\r\n        if (typeof action === 'function' || Array.isArray(action)) {\r\n          name.split(',').forEach(n => all[n.trim()] = action)\r\n        }\r\n      })\r\n    }\r\n\r\n    if (!all['.']) all['.'] = REFRESH;\r\n    Object.keys(all).forEach(name => {\r\n      const action = all[name];\r\n      if (typeof action === 'function') {\r\n        this.add_action(name, action);\r\n      } else if (Array.isArray(action)) {\r\n        this.add_action(name, action[0], action[1]);\r\n      }\r\n    });\r\n  }\r\n\r\n  public run(event: E, ...args) {\r\n    if (this.state instanceof Promise) {\r\n      return Promise.resolve(this.state).then(state => {\r\n        this.state = state;\r\n        this.run(event, ...args)\r\n      });\r\n    } else {\r\n      const name = event.toString();\r\n      return this.is_global_event(name) ?\r\n        app.run(name, ...args) :\r\n        this._app.run(name, ...args);\r\n    }\r\n  }\r\n\r\n  public on(event: E, fn: (...args) => void, options?: any) {\r\n    const name = event.toString();\r\n    this._actions.push({ name, fn });\r\n    return this.is_global_event(name) ?\r\n      app.on(name, fn, options) :\r\n      this._app.on(name, fn, options);\r\n  }\r\n\r\n  public runAsync(event: E, ...args) {\r\n    const name = event.toString();\r\n    return this.is_global_event(name) ?\r\n      app.runAsync(name, ...args) :\r\n      this._app.runAsync(name, ...args);\r\n  }\r\n\r\n  // obsolete\r\n  public query(event: E, ...args) {\r\n    return this.runAsync(event, ...args);\r\n  }\r\n\r\n  public unmount() {\r\n    this.observer?.disconnect();\r\n    this._actions.forEach(action => {\r\n      const { name, fn } = action;\r\n      this.is_global_event(name) ?\r\n        app.off(name, fn) :\r\n        this._app.off(name, fn);\r\n    });\r\n  }\r\n}\r\n","import webComponent from './web-component';\n// tslint:disable:no-invalid-this\nexport const Reflect = {\n    meta: new WeakMap(),\n    defineMetadata(metadataKey, metadataValue, target) {\n        if (!this.meta.has(target))\n            this.meta.set(target, {});\n        this.meta.get(target)[metadataKey] = metadataValue;\n    },\n    getMetadataKeys(target) {\n        target = Object.getPrototypeOf(target);\n        return this.meta.get(target) ? Object.keys(this.meta.get(target)) : [];\n    },\n    getMetadata(metadataKey, target) {\n        target = Object.getPrototypeOf(target);\n        return this.meta.get(target) ? this.meta.get(target)[metadataKey] : null;\n    }\n};\nexport function update(events, options = {}) {\n    return (target, key, descriptor) => {\n        const name = events ? events.toString() : key;\n        Reflect.defineMetadata(`apprun-update:${name}`, { name, key, options }, target);\n        return descriptor;\n    };\n}\nexport function on(events, options = {}) {\n    return function (target, key) {\n        const name = events ? events.toString() : key;\n        Reflect.defineMetadata(`apprun-update:${name}`, { name, key, options }, target);\n    };\n}\nexport function customElement(name, options) {\n    return function _customElement(constructor) {\n        webComponent(name, constructor, options);\n        return constructor;\n    };\n}\n//# sourceMappingURL=decorator.js.map","import webComponent, { CustomElementOptions } from './web-component';\n\n// tslint:disable:no-invalid-this\nexport const Reflect = {\n\n  meta: new WeakMap(),\n\n  defineMetadata(metadataKey, metadataValue, target) {\n    if (!this.meta.has(target)) this.meta.set(target, {});\n    this.meta.get(target)[metadataKey] = metadataValue;\n  },\n\n  getMetadataKeys(target) {\n    target = Object.getPrototypeOf(target);\n    return this.meta.get(target) ? Object.keys(this.meta.get(target)) : [];\n  },\n\n  getMetadata(metadataKey, target) {\n    target = Object.getPrototypeOf(target);\n    return this.meta.get(target) ? this.meta.get(target)[metadataKey] : null;\n  }\n}\n\nexport function update<E=string>(events?: E, options: any = {}) {\n  return (target: any, key: string, descriptor: any) => {\n    const name = events ? events.toString() : key;\n    Reflect.defineMetadata(`apprun-update:${name}`,\n      { name, key, options }, target);\n    return descriptor;\n  }\n}\n\nexport function on<E = string>(events?: E, options: any = {}) {\n  return function (target: any, key: string) {\n    const name = events ? events.toString() : key;\n    Reflect.defineMetadata(`apprun-update:${name}`,\n      { name, key, options }, target)\n  }\n}\n\nexport function customElement(name: string, options?: CustomElementOptions) {\n  return function _customElement<T extends { new(...args: any[]): {} }>(constructor: T) {\n    webComponent(name, constructor, options);\n    return constructor;\n  }\n}\n\n","export const customElement = (componentClass, options = {}) => class CustomElement extends HTMLElement {\n    constructor() {\n        super();\n    }\n    get component() { return this._component; }\n    get state() { return this._component.state; }\n    static get observedAttributes() {\n        // attributes need to be set to lowercase in order to get observed\n        return (options.observedAttributes || []).map(attr => attr.toLowerCase());\n    }\n    connectedCallback() {\n        if (this.isConnected && !this._component) {\n            const opts = options || {};\n            this._shadowRoot = opts.shadow ? this.attachShadow({ mode: 'open' }) : this;\n            const observedAttributes = (opts.observedAttributes || []);\n            const attrMap = observedAttributes.reduce((map, name) => {\n                const lc = name.toLowerCase();\n                if (lc !== name) {\n                    map[lc] = name;\n                }\n                return map;\n            }, {});\n            this._attrMap = (name) => attrMap[name] || name;\n            const props = {};\n            Array.from(this.attributes).forEach(item => props[this._attrMap(item.name)] = item.value);\n            // add getters/ setters to allow observation on observedAttributes\n            observedAttributes.forEach(name => {\n                if (this[name] !== undefined)\n                    props[name] = this[name];\n                Object.defineProperty(this, name, {\n                    get() {\n                        return props[name];\n                    },\n                    set(value) {\n                        // trigger change event\n                        this.attributeChangedCallback(name, props[name], value);\n                    },\n                    configurable: true,\n                    enumerable: true\n                });\n            });\n            requestAnimationFrame(() => {\n                const children = this.children ? Array.from(this.children) : [];\n                // children.forEach(el => el.parentElement.removeChild(el));\n                this._component = new componentClass(Object.assign(Object.assign({}, props), { children })).mount(this._shadowRoot, opts);\n                // attach props to component\n                this._component._props = props;\n                // expose dispatchEvent\n                this._component.dispatchEvent = this.dispatchEvent.bind(this);\n                if (this._component.mounted) {\n                    const new_state = this._component.mounted(props, children, this._component.state);\n                    if (typeof new_state !== 'undefined')\n                        this._component.state = new_state;\n                }\n                this.on = this._component.on.bind(this._component);\n                this.run = this._component.run.bind(this._component);\n                if (!(opts.render === false))\n                    this._component.run('.');\n            });\n        }\n    }\n    disconnectedCallback() {\n        var _a, _b, _c, _d;\n        (_b = (_a = this._component) === null || _a === void 0 ? void 0 : _a.unload) === null || _b === void 0 ? void 0 : _b.call(_a);\n        (_d = (_c = this._component) === null || _c === void 0 ? void 0 : _c.unmount) === null || _d === void 0 ? void 0 : _d.call(_c);\n        this._component = null;\n    }\n    attributeChangedCallback(name, oldValue, value) {\n        if (this._component) {\n            // camelCase attributes arrive only in lowercase\n            const mappedName = this._attrMap(name);\n            // store the new property/ attribute\n            this._component._props[mappedName] = value;\n            this._component.run('attributeChanged', mappedName, oldValue, value);\n            if (value !== oldValue && !(options.render === false)) {\n                window.requestAnimationFrame(() => {\n                    // re-render state with new combined props on next animation frame\n                    this._component.run('.');\n                });\n            }\n        }\n    }\n};\nexport default (name, componentClass, options) => {\n    (typeof customElements !== 'undefined') && customElements.define(name, customElement(componentClass, options));\n};\n//# sourceMappingURL=web-component.js.map","declare var customElements;\n\nexport type CustomElementOptions = {\n  render?: boolean;\n  shadow?: boolean;\n  history?: boolean;\n  global_event?: boolean;\n  observedAttributes?: string[];\n};\n\nexport const customElement = (componentClass, options: CustomElementOptions = {}) => class CustomElement extends HTMLElement {\n  private _shadowRoot;\n  private _component;\n  private _attrMap: (arg0: string) => string;\n  public on;\n  public run;\n  constructor() {\n    super();\n  }\n  get component() { return this._component; }\n  get state() { return this._component.state; }\n\n  static get observedAttributes() {\n    // attributes need to be set to lowercase in order to get observed\n    return (options.observedAttributes || []).map(attr => attr.toLowerCase());\n  }\n\n  connectedCallback() {\n    if (this.isConnected && !this._component) {\n      const opts = options || {};\n      this._shadowRoot = opts.shadow ? this.attachShadow({ mode: 'open' }) : this;\n      const observedAttributes = (opts.observedAttributes || [])\n\n      const attrMap = observedAttributes.reduce((map, name) => {\n        const lc = name.toLowerCase()\n        if (lc !== name) {\n          map[lc] = name\n        }\n        return map\n      }, {})\n      this._attrMap = (name: string) : string => attrMap[name] || name\n\n      const props = {};\n      Array.from(this.attributes).forEach(item => props[this._attrMap(item.name)] = item.value);\n\n      // add getters/ setters to allow observation on observedAttributes\n      observedAttributes.forEach(name => {\n        if (this[name] !== undefined) props[name] = this[name];\n        Object.defineProperty(this, name, {\n          get(): any {\n            return props[name];\n          },\n          set(this: CustomElement, value: unknown) {\n            // trigger change event\n            this.attributeChangedCallback(name, props[name], value)\n          },\n          configurable: true,\n          enumerable: true\n        });\n      })\n\n      requestAnimationFrame(() => {\n        const children = this.children ? Array.from(this.children) : [];\n        // children.forEach(el => el.parentElement.removeChild(el));\n        this._component = new componentClass({ ...props, children }).mount(this._shadowRoot, opts);\n        // attach props to component\n        this._component._props = props;\n        // expose dispatchEvent\n        this._component.dispatchEvent = this.dispatchEvent.bind(this)\n        if (this._component.mounted) {\n          const new_state = this._component.mounted(props, children, this._component.state);\n          if (typeof new_state !== 'undefined') this._component.state = new_state;\n        }\n        this.on = this._component.on.bind(this._component);\n        this.run = this._component.run.bind(this._component);\n        if (!(opts.render === false)) this._component.run('.');\n      });\n    }\n  }\n\n  disconnectedCallback() {\n    this._component?.unload?.();\n    this._component?.unmount?.();\n    this._component = null;\n  }\n\n  attributeChangedCallback(name: string, oldValue: unknown, value: unknown) {\n    if (this._component) {\n      // camelCase attributes arrive only in lowercase\n      const mappedName = this._attrMap(name);\n      // store the new property/ attribute\n      this._component._props[mappedName] = value;\n      this._component.run('attributeChanged', mappedName, oldValue, value);\n\n      if (value !== oldValue && !(options.render === false)) {\n        window.requestAnimationFrame(() => {\n          // re-render state with new combined props on next animation frame\n          this._component.run('.')\n        })\n      }\n    }\n  }\n}\n\nexport default (name: string, componentClass, options?: CustomElementOptions) => {\n  (typeof customElements !== 'undefined') && customElements.define(name, customElement(componentClass, options))\n}\n","import app from './app';\nexport const ROUTER_EVENT = '//';\nexport const ROUTER_404_EVENT = '///';\nexport const route = (url) => {\n    if (!url)\n        url = '#';\n    if (url.startsWith('#')) {\n        const [name, ...rest] = url.split('/');\n        app.run(name, ...rest) || app.run(ROUTER_404_EVENT, name, ...rest);\n        app.run(ROUTER_EVENT, name, ...rest);\n    }\n    else if (url.startsWith('/')) {\n        const [_, name, ...rest] = url.split('/');\n        app.run('/' + name, ...rest) || app.run(ROUTER_404_EVENT, '/' + name, ...rest);\n        app.run(ROUTER_EVENT, '/' + name, ...rest);\n    }\n    else {\n        app.run(url) || app.run(ROUTER_404_EVENT, url);\n        app.run(ROUTER_EVENT, url);\n    }\n};\nexport default route;\n//# sourceMappingURL=router.js.map","import app from './app';\n\nexport type Route = (url: string, ...args: any[]) => any;\n\nexport const ROUTER_EVENT: string = '//';\nexport const ROUTER_404_EVENT: string = '///';\n\nexport const route: Route = (url: string) => {\n  if (!url) url = '#';\n  if (url.startsWith('#')) {\n    const [name, ...rest] = url.split('/');\n    app.run(name, ...rest) || app.run(ROUTER_404_EVENT, name, ...rest);\n    app.run(ROUTER_EVENT, name, ...rest);\n  } else if (url.startsWith('/')) {\n    const [_, name, ...rest] = url.split('/');\n    app.run('/' + name, ...rest) || app.run(ROUTER_404_EVENT, '/' + name, ...rest);\n    app.run(ROUTER_EVENT, '/' + name, ...rest);\n  } else {\n    app.run(url) || app.run(ROUTER_404_EVENT, url);\n    app.run(ROUTER_EVENT, url);\n  }\n}\nexport default route;"],"names":["$d845d838f0e6e62c$var$app","$parcel$global","globalThis","$d845d838f0e6e62c$export$86fbec116b87613f","constructor","_events","on","name","fn","options","push","off","subscribers","filter","sub","find","run","args","getSubscribers","console","assert","length","forEach","delay","Object","keys","apply","once","assign","_t","clearTimeout","setTimeout","runAsync","Promise","all","map","query","events","evt","endsWith","startsWith","replace","sort","a","b","event","$d845d838f0e6e62c$var$root","self","global","$d845d838f0e6e62c$export$2e2bcd8739ae039","$eea6e28fc566d180$var$getStateValue","component","$eea6e28fc566d180$var$setStateValue","value","state","setState","$eea6e28fc566d180$var$apply_directive","key","props","tag","substring","e","Array","isArray","handler","p","type","target","checked","Number","multiple","selected","$eea6e28fc566d180$var$directive","vdom","element","children","$d3d8ba71a5ce8f2f$var$ATTR_PROPS","$d3d8ba71a5ce8f2f$var$collect","ch","c","i","$d3d8ba71a5ce8f2f$var$keyCache","WeakMap","$d3d8ba71a5ce8f2f$var$update","node","isSvg","$d3d8ba71a5ce8f2f$var$same","el","key1","nodeName","key2","toUpperCase","parentNode","replaceChild","$d3d8ba71a5ce8f2f$var$create","$d3d8ba71a5ce8f2f$var$updateChildren","$d3d8ba71a5ce8f2f$export$c8dce3c08436e91e","_a","_b","old_len","childNodes","new_len","len","Math","min","child","textContent","nodeType","nodeValue","$d3d8ba71a5ce8f2f$var$createText","HTMLElement","SVGElement","insertBefore","old","temp","nextSibling","appendChild","n","removeChild","lastChild","d","document","createDocumentFragment","$d3d8ba71a5ce8f2f$export$74e2a2bf9f381f22","html","div","createElement","insertAdjacentHTML","from","indexOf","createTextNode","JSON","stringify","createElementNS","$d3d8ba71a5ce8f2f$var$mergeProps","oldProps","newProps","cname","dname","match","dataset","style","cssText","s","xname","toLowerCase","removeAttributeNS","setAttributeNS","setAttribute","removeAttribute","test","getAttribute","window","requestAnimationFrame","$13657f9c6c27f7d3$export$da64fc29f17f9d0e","componentClass","_component","observedAttributes","attr","connectedCallback","isConnected","opts","_shadowRoot","shadow","attachShadow","mode","attrMap","reduce","lc","_attrMap","attributes","item","undefined","defineProperty","get","set","attributeChangedCallback","configurable","enumerable","mount","_props","dispatchEvent","bind","mounted","new_state","render","disconnectedCallback","_c","_d","unload","call","unmount","oldValue","mappedName","$13657f9c6c27f7d3$export$2e2bcd8739ae039","customElements","define","$167748ee6780b422$export$5529805dde9bd358","meta","defineMetadata","metadataKey","metadataValue","has","getMetadataKeys","getPrototypeOf","getMetadata","$c7ca5bcb5d92be12$var$componentCache","Map","o","components","$c7ca5bcb5d92be12$var$REFRESH","$c7ca5bcb5d92be12$export$16fa2f45be04daa8","renderState","view","_","getElementById","querySelector","tracking_id","Date","valueOf","toString","MutationObserver","observer","changes","body","contains","disconnect","observe","childList","subtree","attributeOldValue","attributeFilter","transition","rendered","history","resolve","then","v","_state","enable_history","_history","_history_idx","callback","update","_app","_actions","_global_events","_history_prev","_history_next","start","global_event","prev","next","route","add_actions","is_global_event","add_action","action","current_state","newState","actions","act","names","split","trim","__isAppRunComponent","$c537a6709b1de089$export$4cb887bfde2d34ca","url","rest","h","Error","nodes","$d3d8ba71a5ce8f2f$var$render","parent","$d3d8ba71a5ce8f2f$var$createComponent","idx","$d3d8ba71a5ce8f2f$var$render_component","id","now","asTag","__componentCache","new_parent","Fragment","webComponent","safeHTML","model","NOOP","addEventListener","onpopstate","location","hash","hasAttribute","use_render","use_react","React","ReactDOM","version","_root","createRoot","className","$onclick"],"version":3,"file":"index.js.map"}